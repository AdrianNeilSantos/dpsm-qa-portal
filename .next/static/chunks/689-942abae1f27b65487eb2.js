(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[689],{54689:function(e,t,r){"use strict";r.d(t,{Z:function(){return E}});var a=r(809),n=r.n(a),s=r(92447),l=r(26265),c=r(85893),i=r(64121),o=r(61588),d=r(67294),u=r(17513),m=r(11163),h=r(74047),f=r(52700),b=r(8127),p=r(58580),y=r(20775),j=r(9669),x=r.n(j),v=r(49704),g=r.n(v);function N(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,l=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return l=e.done,e},e:function(e){c=!0,s=e},f:function(){try{l||null==r.return||r.return()}finally{if(c)throw s}}}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function w(e,t){return I.apply(this,arguments)}function I(){return(I=(0,s.Z)(n().mark((function e(t,r){var a,s,l,c,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=g().decode(r),a.facultyId,e.prev=2,!r){e.next=17;break}e.prev=4,s=N(t.values());try{for(s.s();!(l=s.n()).done;)c=l.value,console.log(c)}catch(n){s.e(n)}finally{s.f()}return e.next=9,x()({method:"POST",url:"http://localhost:3001/api/faculty/load",data:t,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(r)}});case 9:return i=e.sent,e.abrupt("return",i.data);case 13:return e.prev=13,e.t0=e.catch(4),console.error(e.t0),e.abrupt("return",e.t0);case 17:e.next=23;break;case 19:return e.prev=19,e.t1=e.catch(2),console.error(e.t1),e.abrupt("return",e.t1);case 23:case"end":return e.stop()}}),e,null,[[2,19],[4,13]])})))).apply(this,arguments)}function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,y.Z)(e);if(t){var n=(0,y.Z)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,p.Z)(this,r)}}var C=function(e){(0,b.Z)(r,e);var t=k(r);function r(e){return(0,h.Z)(this,r),t.call(this,e)}return(0,f.Z)(r,[{key:"render",value:function(){for(var e=this,t=[],r=(new Date).getFullYear(),a=r;a>=1970;a--)t.push(a);var l=Object.keys(t).map((function(e){return(0,c.jsxs)("option",{value:t[e],children:[t[e]-1,"-",t[e]]})})),i={subject:"",section:"",semester:"1st Semester",academicYear:r,syllabus:""};return(0,c.jsx)(u.J9,{initialValues:i,onSubmit:function(){var t=(0,s.Z)(n().mark((function t(r,a){var s,l,c,i,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=a.resetForm,l=document.getElementById("facLoadForm"),c=new FormData(l),t.next=5,w(c,e.props.token);case 5:i=t.sent,o=document.getElementById("loadalert"),1==i.success?(o.className="alert alert-success",o.style="visibility: visible",o.innerHTML=i.message):(o.className="alert alert-danger",i.error?o.innerHTML=i.error[0].message:o.innerHTML=i.message),o.setAttribute("style","visibility: visible"),$("#loadalert").fadeTo(5e3,500).slideUp(500,(function(){$("#loadalert").slideUp(500)})),s(),m.default.push("/admin/"+e.props.facultyId);case 12:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),children:function(t){t.values,t.errors,t.touched;var r=t.isSubmitting;return(0,c.jsxs)(u.l0,{id:"facLoadForm",children:[(0,c.jsx)("hr",{}),(0,c.jsx)("h5",{children:"Add Faculty Load"}),(0,c.jsx)("br",{}),(0,c.jsxs)("div",{className:"form-row",children:[(0,c.jsx)(u.gN,{className:"form-control",type:"hidden",name:"facultyId",value:e.props.facultyId}),(0,c.jsxs)("div",{className:"form-group col-md-2",children:[(0,c.jsx)("label",{htmlFor:"Subject",children:" Subject "}),(0,c.jsx)(u.gN,{className:"form-control",type:"text",name:"subject",placeholder:"Input subject",required:!0})]}),(0,c.jsxs)("div",{className:"form-group col-md-2",children:[(0,c.jsx)("label",{htmlFor:"Section",children:" Section "}),(0,c.jsx)(u.gN,{className:"form-control",type:"text",name:"section",placeholder:"Input section",required:!0})]}),(0,c.jsxs)("div",{className:"form-group col-md-3",children:[(0,c.jsx)("label",{htmlFor:"Semester",children:" Semester "}),(0,c.jsxs)(u.gN,{as:"select",className:"form-control",name:"semester",required:!0,children:[(0,c.jsx)("option",{value:"1st",children:"1st Semester"}),(0,c.jsx)("option",{value:"2nd",children:"2nd Semester"}),(0,c.jsx)("option",{value:"Midyear",children:"Mid-Year"})]})]}),(0,c.jsxs)("div",{className:"form-group col-md-2",children:[(0,c.jsx)("label",{htmlFor:"Year",children:" Academic Year "}),(0,c.jsx)(u.gN,{as:"select",className:"form-control",name:"academicYear",required:!0,children:l})]})]}),(0,c.jsx)("br",{}),(0,c.jsx)("button",{type:"submit",className:"btn btn-primary col-md-12",disabled:r,children:"Submit"})]})}})}}]),r}(d.Component);function O(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,l=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return l=e.done,e},e:function(e){c=!0,s=e},f:function(){try{l||null==r.return||r.return()}finally{if(c)throw s}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function F(e,t,r){return L.apply(this,arguments)}function L(){return(L=(0,s.Z)(n().mark((function e(t,r,a){var s,l,c,i,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r){e.next=12;break}s="http://localhost:3001/api/faculty/load/"+a,""==t.get("setResults")&&t.delete("setResults"),l=O(t.entries());try{for(l.s();!(c=l.n()).done;)i=c.value,console.log(i[0]+" "+i[1])}catch(n){l.e(n)}finally{l.f()}return e.next=8,x()({method:"PUT",url:s,data:t,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(r)}});case 8:return o=e.sent,e.abrupt("return",o.data);case 12:console.log(access.result.message);case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}function T(e,t,r){return M.apply(this,arguments)}function M(){return(M=(0,s.Z)(n().mark((function e(t,r,a){var s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r){e.next=13;break}return e.prev=2,e.next=5,x().delete("http://localhost:3001/api/faculty/load/"+a,{headers:{Authorization:"Bearer ".concat(r)},data:{recordId:"".concat(t)}});case 5:return s=e.sent,e.abrupt("return",s.data);case 9:return e.prev=9,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",e.t0);case 13:e.next=19;break;case 15:return e.prev=15,e.t1=e.catch(0),console.error(e.t1),e.abrupt("return",e.t1);case 19:case"end":return e.stop()}}),e,null,[[0,15],[2,9]])})))).apply(this,arguments)}function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var E=function(e){for(var t=[],r=(new Date).getFullYear();r>=1970;r--)t.push(r);var a,l=Object.keys(t).map((function(e){return(0,c.jsxs)("option",{value:t[e],children:[t[e]-1,"-",t[e]]})})),h=0,f=0,b=d.useState({recordId:0,subject:"",section:"",semester:"",academicYear:"",syllabus:""}),p=(0,i.Z)(b,2),y=p[0],j=p[1];function x(e){f=e}function v(t){Object.keys(e.children).map((function(r){e.children[r].recordId==t&&(j(e.children[r]),e.children[r].syllabus?j((function(t){return Z(Z({},t),{},{syllabus:e.children[r].syllabus})})):j((function(e){return Z(Z({},e),{},{syllabus:"None"})})))}))}return e.name,a=null!=e.children?Object.keys(e.children).map((function(t){if(null!=e.children[t].recordId)return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:e.children[t].subject}),(0,c.jsx)("td",{children:e.children[t].section}),(0,c.jsx)("td",{children:e.children[t].semester}),(0,c.jsx)("td",{children:e.children[t].academicYear-1+" - "+e.children[t].academicYear}),(0,c.jsxs)("td",{children:[e.children[t].syllabus&&(0,c.jsxs)("div",{className:"btn-grp",children:[(0,c.jsx)("a",{className:"btn btn-info",href:"http://localhost:3001/"+e.children[t].syllabus,style:{color:"white"},target:"_blank",children:"View"}),e.editClass&&(0,c.jsx)("a",{className:"btn btn-warning","data-toggle":"modal","data-target":"#addSyllabus",onClick:function(){x(e.children[t].recordId),v(f)},children:"Edit"})]}),e.editClass&&!e.children[t].syllabus&&(0,c.jsx)("a",{className:"btn btn-warning","data-toggle":"modal","data-target":"#addSyllabus",onClick:function(){x(e.children[t].recordId),v(f)},children:"Add Syllabus"}),!e.editClass&&!e.children[t].syllabus&&(0,c.jsx)("div",{children:"None"})]}),5==e.role&&(0,c.jsx)("td",{children:(0,c.jsxs)("div",{className:"btn-group",children:[(0,c.jsx)("a",{className:"btn btn-info","data-toggle":"modal","data-target":"#editClass",onClick:function(){x(e.children[t].recordId),v(f)},children:"Edit"}),(0,c.jsx)("a",{className:"btn btn-danger","data-toggle":"modal","data-target":"#deleteClass",onClick:function(){var r;r=e.children[t].recordId,h=r},children:"Delete"})]})})]},e.children[t].recordId)})):(0,c.jsx)("td",{colSpan:"7",children:(0,c.jsx)("p",{align:"center",children:"No data available!"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{align:"center",children:" Faculty Load "}),(0,c.jsx)(o.Z,{unit:e.unit,position:e.position,children:e.name}),(0,c.jsx)("div",{role:"alert",id:"loadalert",style:{visibility:"hidden"}}),(0,c.jsx)("div",{className:"table-responsive",children:(0,c.jsxs)("table",{className:"table table-striped table-sm",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Subject"}),(0,c.jsx)("th",{children:"Section"}),(0,c.jsx)("th",{children:"Semester"}),(0,c.jsx)("th",{children:"Academic Year"}),(0,c.jsx)("th",{children:"Syllabus"}),5==e.role&&(0,c.jsx)("th",{children:"Action"})]})}),(0,c.jsx)("tbody",{children:a})]})}),5==e.role&&(0,c.jsx)("div",{children:(0,c.jsx)(C,{token:e.token,facultyId:e.facultyId,role:e.role})}),(0,c.jsx)("div",{className:"modal fade",id:"editClass",tabIndex:"-1",role:"dialog","aria-labelledby":"editClassLabel","aria-hidden":"true",children:(0,c.jsx)("div",{className:"modal-dialog",role:"document",children:(0,c.jsxs)("div",{className:"modal-content",children:[(0,c.jsxs)("div",{className:"modal-header",children:[(0,c.jsx)("h5",{className:"modal-title",id:"editClassLabel",children:"Update Class Record"}),(0,c.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,c.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,c.jsx)(u.J9,{enableReinitialize:!0,initialValues:y,onSubmit:function(){var t=(0,s.Z)(n().mark((function t(r){var a,s,l,c;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=document.getElementById("editClassForm"),(s=new FormData(a)).append("recordId",y.recordId),l=document.getElementById("loadalert"),t.next=6,F(s,e.token,e.facultyId);case 6:1==(c=t.sent).success?(l.className="alert alert-success",l.style="visibility: visible",l.innerHTML=c.message):(l.className="alert alert-danger",c.error?l.innerHTML=c.error[0].message:l.innerHTML=c.message),$("#loadalert").fadeTo(5e3,500).slideUp(500,(function(){$("#loadalert").slideUp(500)})),m.default.push("/admin/"+e.facultyId,"/admin/"+e.facultyId);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:function(e){e.values,e.errors,e.touched;var t=e.isSubmitting;return(0,c.jsxs)(u.l0,{id:"editClassForm",children:[(0,c.jsxs)("div",{className:"modal-body",children:[(0,c.jsx)("hr",{}),(0,c.jsx)("div",{className:"form-row",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"subject",children:" Subject "}),(0,c.jsx)(u.gN,{className:"form-control",type:"text",name:"subject",id:"subject",placeholder:"Input subject"})]})}),(0,c.jsx)("div",{className:"form-row",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"section",children:" Section "}),(0,c.jsx)(u.gN,{className:"form-control",type:"text",name:"section",id:"section",placeholder:"Input section"})]})}),(0,c.jsx)("div",{className:"form-row",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"semester",children:" Semester "}),(0,c.jsxs)(u.gN,{as:"select",className:"form-control",name:"semester",id:"semester",required:!0,children:[(0,c.jsx)("option",{value:"1st",children:"1st Semester"}),(0,c.jsx)("option",{value:"2nd",children:"2nd Semester"}),(0,c.jsx)("option",{value:"Midyear",children:"Mid-Year"})]})]})}),(0,c.jsx)("div",{className:"form-row",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"Year",children:" Academic Year "}),(0,c.jsx)(u.gN,{as:"select",className:"form-control",name:"academicYear",id:"academicYear",required:!0,children:l})]})})]}),(0,c.jsxs)("div",{className:"modal-footer",children:[(0,c.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"Close"}),(0,c.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:t,onClick:function(){$("#editClass").modal("toggle")},children:"Save changes"})]})]})}})]})})}),(0,c.jsx)("div",{className:"modal fade",id:"deleteClass",tabIndex:"-1",role:"dialog","aria-labelledby":"deleteClassLabel","aria-hidden":"true",children:(0,c.jsx)("div",{className:"modal-dialog",role:"document",children:(0,c.jsxs)("div",{className:"modal-content",children:[(0,c.jsxs)("div",{className:"modal-header",children:[(0,c.jsx)("h5",{className:"modal-title",id:"deleteClassLabel",children:"Delete Class Record"}),(0,c.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,c.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,c.jsxs)("div",{className:"modal-body",children:[(0,c.jsx)("hr",{}),(0,c.jsx)("p",{children:" Are you sure you want to delete this faculty load information? "})]}),(0,c.jsxs)("div",{className:"modal-footer",children:[(0,c.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"No, don't delete"}),(0,c.jsx)("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:(0,s.Z)(n().mark((function t(){var r,a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=document.getElementById("loadalert"),t.next=3,T(h,e.token,e.facultyId);case 3:1==(a=t.sent).success?(r.className="alert alert-success",r.style="visibility: visible",r.innerHTML=a.message):(r.className="alert alert-danger",a.error?r.innerHTML=a.error[0].message:r.innerHTML=a.message),$("#loadalert").fadeTo(5e3,500).slideUp(500,(function(){$("#loadalert").slideUp(500)})),m.default.push("/admin/"+e.facultyId,"/admin/"+e.facultyId);case 7:case"end":return t.stop()}}),t)}))),children:"Yes, delete"})]})]})})}),(0,c.jsx)("div",{className:"modal fade",id:"addSyllabus",tabIndex:"-1",role:"dialog","aria-labelledby":"addSyllabusLabel","aria-hidden":"true",children:(0,c.jsx)("div",{className:"modal-dialog",role:"document",children:(0,c.jsxs)("div",{className:"modal-content",children:[(0,c.jsxs)("div",{className:"modal-header",children:[(0,c.jsx)("h5",{className:"modal-title",id:"addSyllabusLabel",children:"Update Class Records"}),(0,c.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,c.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,c.jsx)(u.J9,{enableReinitialize:!0,initialValues:y,onSubmit:function(){var t=(0,s.Z)(n().mark((function t(r){var a,s,l,c;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=document.getElementById("loadalert"),s=document.getElementById("addSyllForm"),(l=new FormData(s)).append("recordId",y.recordId),console.log(e),t.next=7,F(l,e.token,e.facultyId);case 7:1==(c=t.sent).success?(a.className="alert alert-success",a.style="visibility: visible",a.innerHTML=c.message):(a.className="alert alert-danger",c.error?a.innerHTML=c.error[0].message:a.innerHTML=c.message),$("#loadalert").fadeTo(5e3,500).slideUp(500,(function(){$("#loadalert").slideUp(500)})),m.default.push("/faculty/faculty-load","/faculty/faculty-load");case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:function(e){e.values,e.errors,e.touched;var t=e.isSubmitting;return(0,c.jsxs)(u.l0,{id:"addSyllForm",children:[(0,c.jsx)("div",{className:"modal-body",children:(0,c.jsx)("div",{className:"form-row",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsxs)("label",{htmlFor:"syllabus",children:[" Add/Edit Syllabus [Uploaded: ",y.syllabus,"] "]}),(0,c.jsx)(u.gN,{type:"file",className:"form-control-file",name:"syllabus",id:"syllabus",value:void 0}),(0,c.jsx)(u.gN,{type:"hidden",className:"form-control",name:"subject"}),(0,c.jsx)(u.gN,{type:"hidden",className:"form-control",name:"section"}),(0,c.jsx)(u.gN,{type:"hidden",className:"form-control",name:"setResults"})]})})}),(0,c.jsxs)("div",{className:"modal-footer",children:[(0,c.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"Close"}),(0,c.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:t,onClick:function(){$("#addSyllabus").modal("toggle")},children:"Save changes"})]})]})}})]})})})]})}}}]);