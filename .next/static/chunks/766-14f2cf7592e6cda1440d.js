(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[766],{14176:function(e,a,t){"use strict";t(85893),t(9008),t(41664),t(37940)},60377:function(e,a,t){"use strict";t.d(a,{Z:function(){return x}});var s=t(809),n=t.n(s),r=t(92447),i=t(85893),l=t(26265),c=t(64121),o=(t(41664),t(67294)),u=t(11163),d=t(9669),p=t.n(d);function m(e,a){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)(n().mark((function e(a,t){var s,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=7;break}return s="https://api.dpsmqaportal.com/api/user/"+"".concat(a.userId),e.next=5,p()({method:"PUT",url:s,data:{status:"".concat(a.status),remarks:"".concat(a.remarks)},headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 5:return r=e.sent,e.abrupt("return",r.data);case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function f(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);a&&(s=s.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,s)}return t}function j(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?f(Object(t),!0).forEach((function(a){(0,l.Z)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var x=function(e){var a,t,s,d,p,h=0,f=o.useState({userId:0,status:"",remarks:"",facultyName:""}),x=(0,c.Z)(f,2),v=x[0],g=x[1];function y(e,a){var t;g(j(j({},v),{},"status"==e?(t={},(0,l.Z)(t,e,a.target.value),(0,l.Z)(t,"remarks",""),t):(0,l.Z)({},e,a.target.value)))}if("Inactive"==v.status?(d="none",p="block"):(d="block",p="none"),null==e.children)return(0,i.jsx)("p",{align:"center",children:"No approvals needed!"});var b,N=function(e){h=e},_=function(){var a=(0,r.Z)(n().mark((function a(t){return n().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object.keys(e.children).map(function(){var a=(0,r.Z)(n().mark((function a(s){var i;return n().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=e.children[s].faculty_units,a.next=3,Object.keys(i).map(function(){var e=(0,r.Z)(n().mark((function e(a){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i[a].faculty_personal_info.user.userId!=t){e.next=3;break}return e.next=3,g({userId:t,status:i[a].faculty_personal_info.user.status,remarks:i[a].faculty_personal_info.user.remarks,facultyName:i[a].faculty_personal_info.lastName+", "+i[a].faculty_personal_info.firstName});case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}());case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}());case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return"approval"==e.path?b="/faculty/approval/":"admin"==e.path?b="/admin/":"info"==e.path&&(b="/faculty/view/"),a=Object.keys(e.children).map((function(a){if(1==e.children[a].unitId){var t=e.children[a].faculty_units,s=Object.keys(t).map((function(a){var s,n,r=t[a].faculty_personal_info.lastName,l=t[a].faculty_personal_info.firstName,c=t[a].facultyId,o=t[a].forApprovalCount;return t[a].faculty_personal_info.faculty_update&&(n=t[a].faculty_personal_info.faculty_update.updatedAt.split("T")[0]),"approval"!=e.path&&(s="disabled btn ","Active"==t[a].faculty_personal_info.user.status?s+="btn-warning":s+="btn-danger"),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("div",{className:"list-group",children:(0,i.jsxs)("a",{href:"".concat(b+encodeURIComponent(c)),className:"list-group-item list-group-item-action list-group-item-light",forApproval:t[a].faculty_personal_info,children:[r,", ",l,"\xa0 ",(0,i.jsx)("span",{className:"badge badge-danger",children:o}),"info"==e.path&&3==e.role&&n&&" (Last Updated: ".concat(n,")")]})})}),"approval"!=e.path&&(0,i.jsx)("td",{children:(0,i.jsx)("span",{className:s,children:t[a].faculty_personal_info.user.status})}),"approval"!=e.path&&(0,i.jsx)("td",{children:t[a].faculty_personal_info.user.remarks||"None"}),5==e.role&&(0,i.jsx)("td",{children:(0,i.jsx)("a",{className:"btn btn-info","data-toggle":"modal","data-dismiss":"modal","data-target":"#editStatus",onClick:function(){N(t[a].faculty_personal_info.user.userId),_(h)},children:"Edit"})})]})}));return(0,i.jsxs)("div",{children:[(0,i.jsxs)("h4",{align:"center",children:[" ",e.children[a].unit," "]}),(0,i.jsx)("div",{className:"table-responsive",children:(0,i.jsxs)("table",{className:"table",children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Name"}),"approval"!=e.path&&(0,i.jsx)("th",{children:"Status"}),"approval"!=e.path&&(0,i.jsx)("th",{children:"Remarks"}),5==e.role&&(0,i.jsx)("th",{children:"Action"})]}),s]})})]})}})),t=Object.keys(e.children).map((function(a){if(2==e.children[a].unitId){var t=e.children[a].faculty_units,s=Object.keys(t).map((function(a){var s,n,r=t[a].faculty_personal_info.lastName,l=t[a].faculty_personal_info.firstName,c=t[a].facultyId,o=t[a].forApprovalCount;return t[a].faculty_personal_info.faculty_update&&(n=t[a].faculty_personal_info.faculty_update.updatedAt.split("T")[0]),"approval"!=e.path&&(s="disabled btn ","Active"==t[a].faculty_personal_info.user.status?s+="btn-warning":s+="btn-danger"),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("div",{className:"list-group",children:(0,i.jsxs)("a",{href:"".concat(b+encodeURIComponent(c)),className:"list-group-item list-group-item-action list-group-item-light",children:[r,", ",l,"\xa0 ",(0,i.jsx)("span",{className:"badge badge-danger",children:o}),"info"==e.path&&3==e.role&&n&&" (Last Updated: ".concat(n,")")]})})}),"approval"!=e.path&&(0,i.jsx)("td",{children:(0,i.jsx)("span",{className:s,children:t[a].faculty_personal_info.user.status})}),"approval"!=e.path&&(0,i.jsx)("td",{children:t[a].faculty_personal_info.user.remarks||"None"}),5==e.role&&(0,i.jsx)("td",{children:(0,i.jsx)("a",{className:"btn btn-info","data-toggle":"modal","data-dismiss":"modal","data-target":"#editStatus",onClick:function(){N(t[a].faculty_personal_info.user.userId),_(h)},children:"Edit"})})]})}));return(0,i.jsxs)("div",{children:[(0,i.jsxs)("h4",{align:"center",children:[" ",e.children[a].unit," "]}),(0,i.jsx)("div",{className:"table-responsive",children:(0,i.jsxs)("table",{className:"table",children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Name"}),"approval"!=e.path&&(0,i.jsx)("th",{children:"Status"}),"approval"!=e.path&&(0,i.jsx)("th",{children:"Remarks"}),5==e.role&&(0,i.jsx)("th",{children:"Action"})]}),s]})})]})}})),s=Object.keys(e.children).map((function(a){if(3==e.children[a].unitId){var t=e.children[a].faculty_units,s=Object.keys(t).map((function(a){var s,n,r=t[a].faculty_personal_info.lastName,l=t[a].faculty_personal_info.firstName,c=t[a].facultyId,o=t[a].forApprovalCount;return t[a].faculty_personal_info.faculty_update&&(n=t[a].faculty_personal_info.faculty_update.updatedAt.split("T")[0]),"approval"!=e.path&&(s="disabled btn ","Active"==t[a].faculty_personal_info.user.status?s+="btn-warning":s+="btn-danger"),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("div",{className:"list-group",children:(0,i.jsxs)("a",{href:"".concat(b+encodeURIComponent(c)),className:"list-group-item list-group-item-action list-group-item-light",children:[r,", ",l,"\xa0 ",(0,i.jsx)("span",{className:"badge badge-danger",children:o}),"info"==e.path&&3==e.role&&n&&" (Last Updated: ".concat(n,")")]})})}),"approval"!=e.path&&(0,i.jsx)("td",{children:(0,i.jsx)("span",{className:s,children:t[a].faculty_personal_info.user.status})}),"approval"!=e.path&&(0,i.jsx)("td",{children:t[a].faculty_personal_info.user.remarks||"None"}),5==e.role&&(0,i.jsx)("td",{children:(0,i.jsx)("a",{className:"btn btn-info","data-toggle":"modal","data-dismiss":"modal","data-target":"#editStatus",onClick:function(){N(t[a].faculty_personal_info.user.userId),_(h)},children:"Edit"})})]})}));return(0,i.jsxs)("div",{children:[(0,i.jsxs)("h4",{align:"center",children:[" ",e.children[a].unit," "]}),(0,i.jsx)("div",{className:"table-responsive",children:(0,i.jsxs)("table",{className:"table",children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Name"}),"approval"!=e.path&&(0,i.jsx)("th",{children:"Status"}),"approval"!=e.path&&(0,i.jsx)("th",{children:"Remarks"}),5==e.role&&(0,i.jsx)("th",{children:"Action"})]}),s]})})]})}})),(0,i.jsxs)("div",{children:[(0,i.jsx)("br",{}),(0,i.jsx)("div",{className:"alert alert-success",role:"alert",id:"facultyStatusalert",style:{visibility:"hidden"}}),(0,i.jsx)("br",{}),a,(0,i.jsx)("br",{}),t,(0,i.jsx)("br",{}),s,(0,i.jsx)("div",{className:"modal fade",id:"editStatus",tabIndex:"-1",role:"dialog","aria-labelledby":"editStatus","aria-hidden":"true",children:(0,i.jsx)("div",{className:"modal-dialog",role:"document",children:(0,i.jsxs)("div",{className:"modal-content",children:[(0,i.jsxs)("div",{className:"modal-header",children:[(0,i.jsxs)("h5",{className:"modal-title",id:"editStatus",children:["Update Faculty Status - ",v.facultyName]}),(0,i.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,i.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,i.jsx)("div",{className:"modal-body",children:(0,i.jsxs)("form",{children:[(0,i.jsx)("hr",{}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"Status",children:" Status "}),(0,i.jsxs)("select",{className:"form-control",name:"Status",id:"Status",value:v.status,onChange:function(e){return y("status",e)},children:[(0,i.jsx)("option",{value:"Active",children:"Active"},"active"),(0,i.jsx)("option",{value:"Inactive",children:"Inactive"},"inactive")]})]})}),(0,i.jsx)("div",{className:"form-row",id:"activeremarksrow",style:{display:d},children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"Remarks",children:" Remarks "}),(0,i.jsxs)("select",{className:"form-control",name:"Remarks",id:"Remarks",value:v.remarks||"",onChange:function(e){return y("remarks",e)},children:[(0,i.jsx)("option",{value:"",children:"-- SELECT REMARKS --"}),(0,i.jsx)("option",{value:"On Leave",children:"On Leave"})]})]})}),(0,i.jsx)("div",{className:"form-row",id:"inactiveremarksrow",style:{display:p},children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"Remarks",children:" Remarks "}),(0,i.jsxs)("select",{className:"form-control",name:"Remarks",id:"Remarks",value:v.remarks||"",onChange:function(e){return y("remarks",e)},children:[(0,i.jsx)("option",{value:"",children:"-- SELECT REMARKS --"}),(0,i.jsx)("option",{value:"Retired",children:"Retired"}),(0,i.jsx)("option",{value:"Resigned",children:"Resigned"})]})]})})]})}),(0,i.jsxs)("div",{className:"modal-footer",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"Close"}),(0,i.jsx)("button",{type:"button",className:"btn btn-primary",onClick:(0,r.Z)(n().mark((function a(){var t,s;return n().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return $("#editStatus").modal("toggle"),t=document.getElementById("facultyStatusalert"),a.next=4,m(v,e.token);case 4:1==(s=a.sent).success?(t.className="alert alert-success",t.style="visibility: visible",t.innerHTML=s.message):(t.className="alert alert-danger",s.error?t.innerHTML=s.error[0].message:t.innerHTML=s.message),$("#facultyStatusalert").fadeTo(5e3,500).slideUp(500,(function(){$("#facultyStatusalert").slideUp(500)})),u.default.push("/admin");case 8:case"end":return a.stop()}}),a)}))),children:"Save changes"})]})]})})})]})}},81318:function(e,a,t){"use strict";t(85893),t(41664)},8237:function(e,a,t){"use strict";var s=t(85893),n=t(65988),r=t(41664);a.Z=function(e){var a="";switch(e.role){case 1:a="Faculty";break;case 2:a="Unit Head";break;case 3:a="Department Chair";break;default:a="Admin Clerk"}return(0,s.jsxs)("div",{className:"jsx-3546386183 row",children:[(0,s.jsxs)("nav",{className:"jsx-3546386183 navbar navbar-expand-lg",children:[(0,s.jsx)("span",{className:"jsx-3546386183 navbar-text",children:(0,s.jsx)("a",{className:"jsx-3546386183 navbar-brand",children:(0,s.jsx)("img",{src:"/dpsm-seal.png",width:"186",height:"150",alt:"DPSM-QA-Portal",className:"jsx-3546386183 d-inline-block align-top"})})}),(0,s.jsx)("h2",{className:"jsx-3546386183",children:" DPSM QA PORTAL "}),(0,s.jsx)("div",{className:"jsx-3546386183 ml-auto",children:(0,s.jsxs)("h5",{className:"jsx-3546386183",children:[" Currently Logged In: ",(0,s.jsx)(r.default,{href:"/settings/change-password",children:(0,s.jsxs)("a",{className:"jsx-3546386183",children:[" ",e.name," (",a,") "]})})," "]})})]}),(0,s.jsx)(n.default,{id:"3546386183",children:[".navbar.jsx-3546386183{background-color:#910303;width:100%;}","h2.jsx-3546386183,h5.jsx-3546386183{font-family:Georgia;color:#fff;}"]})]})}},97752:function(e,a,t){"use strict";var s=t(85893),n=t(9008),r=t(8237),i=t(37940);t(81318),t(14176),t(49704);a.Z=function(e){var a;return e.approvalList&&(a=e.approvalList),(0,s.jsxs)("div",{className:"container-fluid",children:[(0,s.jsxs)(n.default,{children:[(0,s.jsx)("title",{children:"DPSM-QA-PORTAL"}),(0,s.jsx)("link",{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"}),(0,s.jsx)("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css"}),(0,s.jsx)("script",{src:"https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"}),(0,s.jsx)("script",{src:"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"}),(0,s.jsx)("script",{src:"https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"})]}),(0,s.jsx)(r.Z,{name:e.name,role:e.role}),(0,s.jsxs)("div",{className:"row",id:"layout_row",children:[(0,s.jsx)(i.Z,{role:e.role,approvalList:a,facultyId:e.facultyId,roleAssignment:e.roleAssignmentFlag}),(0,s.jsx)("div",{className:"col",id:"layout_content",children:e.children})]})]})}},37940:function(e,a,t){"use strict";var s=t(85893),n=t(64121),r=t(65988),i=t(41664),l=t(12102),c=t(67294),o=t(11163);a.Z=function(e){var a=(0,o.useRouter)(),t=(0,l.Z)(["user"]),u=(0,n.Z)(t,3),d=(u[0],u[1],u[2]),p=!0,m=!0;1!=e.role&&2!=e.role&&3!=e.role||(m=!1,2!=e.role&&3!=e.role||(p=!1));var h=(0,c.useState)("false"),f=h[0],j=h[1];return(0,s.jsxs)("div",{id:"sidebar",children:[(0,s.jsx)("div",{className:"alert alert-info col-12 d-md-none text-center",onClick:function(){j(!f)},children:" Main Menu "}),(0,s.jsxs)("div",{id:"menu",className:"jsx-1836586042 "+((f?null:"d-none d-md-block")||""),children:[(0,s.jsxs)("div",{className:"jsx-1836586042 list-group col-12",children:[(0,s.jsx)("a",{"data-toggle":"collapse","data-target":"#facultyMenu","aria-controls":"facultyMenu",className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-secondary",children:" Faculty "}),(0,s.jsxs)("div",{id:"facultyMenu",className:"jsx-1836586042 collapse show",children:[!m&&!p&&(0,s.jsx)(i.default,{href:{pathname:"/faculty"},children:(0,s.jsx)("a",{id:"/faculty"===a.pathname?"active":"inactive",className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-success",children:"Dashboard"})}),!m&&(0,s.jsx)(i.default,{href:{pathname:"/faculty/basic-info"},children:(0,s.jsx)("a",{id:"/faculty/basic-info"===a.pathname?"active":"inactive",className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-success",children:"Basic Information"})}),!m&&(0,s.jsx)(i.default,{href:{pathname:"/faculty/accomplishment"},children:(0,s.jsx)("a",{id:"/faculty/accomplishment"===a.pathname?"active":"inactive",className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-success",children:"Accomplishment"})}),!m&&(0,s.jsx)(i.default,{href:{pathname:"/faculty/faculty-load"},children:(0,s.jsx)("a",{id:"/faculty/faculty-load"===a.pathname?"active":"inactive",className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-success",children:"Faculty Load"})}),!m&&(0,s.jsx)(i.default,{href:{pathname:"/faculty/evaluation"},children:(0,s.jsx)("a",{id:"/faculty/evaluation"===a.pathname?"active":"inactive",className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-success ",children:"Peer Evaluation"})}),!m&&!p&&(0,s.jsx)(i.default,{href:{pathname:"/faculty/view/all"},children:(0,s.jsx)("a",{id:"/faculty/view/all"===a.pathname?"active":"inactive",className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-success ",children:"Faculty List"})}),!m&&!p&&(0,s.jsx)(i.default,{href:{pathname:"/faculty/approval"},children:(0,s.jsxs)("a",{id:"/faculty/approval"===a.pathname?"active":"inactive",className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-success ",children:["Pending Approvals \xa0",e.approvalList.facultyCount>0&&(0,s.jsx)("span",{className:"jsx-1836586042 badge badge-danger",children:e.approvalList.facultyCount})]})}),m&&(0,s.jsx)(i.default,{href:{pathname:"/admin"},children:(0,s.jsx)("a",{id:"/admin"===a.pathname?"active":"inactive",className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-success ",children:"Faculty List"})}),!m&&!p&&e.roleAssignment&&(0,s.jsx)(i.default,{href:{pathname:"/faculty/role-assignment"},children:(0,s.jsxs)("a",{id:"/faculty/role-assignment"===a.pathname?"active":"inactive",className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-success",children:["Role Assignment \xa0",(0,s.jsx)("span",{className:"jsx-1836586042 badge badge-danger",children:"!"})]})}),!m&&!p&&!e.roleAssignment&&(0,s.jsx)(i.default,{href:{pathname:"/faculty/role-assignment"},children:(0,s.jsx)("a",{id:"/faculty/role-assignment"===a.pathname?"active":"inactive",className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-success",children:"Role Assignment"})})]})]}),(0,s.jsx)("div",{className:"jsx-1836586042 list-group col-12",children:(0,s.jsx)(i.default,{href:"/student",children:(0,s.jsx)("a",{className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-secondary",children:"Student"})})}),(0,s.jsx)("div",{className:"jsx-1836586042 list-group col-12",children:(0,s.jsx)(i.default,{href:"/alumni",children:(0,s.jsx)("a",{className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-secondary",children:"Alumni"})})}),(0,s.jsx)("div",{className:"jsx-1836586042 list-group col-12",children:(0,s.jsx)(i.default,{href:"/department-activities",children:(0,s.jsx)("a",{className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-secondary",children:"Department Activities"})})}),(0,s.jsx)("div",{className:"jsx-1836586042 list-group col-12",children:(0,s.jsx)(i.default,{href:"/login",children:(0,s.jsx)("a",{onClick:function(){d("user")},className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-danger",children:"Log Out"})})}),(0,s.jsx)(r.default,{id:"1836586042",children:["#menu.jsx-1836586042{background-color:#017823;}",".list-group-item-success.jsx-1836586042{text-indent:20%;}","#active.jsx-1836586042{background-color:#005919;color:#fff;}"]})]})]})}},92447:function(e,a,t){"use strict";function s(e,a,t,s,n,r,i){try{var l=e[r](i),c=l.value}catch(o){return void t(o)}l.done?a(c):Promise.resolve(c).then(s,n)}function n(e){return function(){var a=this,t=arguments;return new Promise((function(n,r){var i=e.apply(a,t);function l(e){s(i,n,r,l,c,"next",e)}function c(e){s(i,n,r,l,c,"throw",e)}l(void 0)}))}}t.d(a,{Z:function(){return n}})},80950:function(){},46601:function(){},89214:function(){},8623:function(){},7748:function(){},85568:function(){},56619:function(){},77108:function(){},52361:function(){},94616:function(){}}]);