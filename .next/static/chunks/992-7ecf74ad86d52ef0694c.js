(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[992],{14588:function(e,r,t){"use strict";t.d(r,{Z:function(){return E}});var a=t(809),n=t.n(a),s=t(92447),l=t(26265),i=t(85893),c=t(64121),o=(t(41664),t(74047)),d=t(52700),u=t(8127),m=t(58580),h=t(20775),p=t(67294),f=t(17513),x=t(11163),b=t(9669),j=t.n(b),v=t(49704),y=t.n(v);function g(e,r){return N.apply(this,arguments)}function N(){return(N=(0,s.Z)(n().mark((function e(r,t){var a,s,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=y().decode(t),s=a.facultyId,e.prev=2,!t){e.next=17;break}return e.prev=4,r.append("facultyId",s),r.append("status","Pending"),e.next=9,j()({method:"POST",url:"https://api.dpsmqaportal.com/api/faculty/accomplishment/add/licensure-exam",data:r,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t)}});case 9:return l=e.sent,e.abrupt("return",l.data);case 13:return e.prev=13,e.t0=e.catch(4),console.error(e.t0),e.abrupt("return",e.t0);case 17:e.next=23;break;case 19:return e.prev=19,e.t1=e.catch(2),console.error(e.t1),e.abrupt("return",e.t1);case 23:case"end":return e.stop()}}),e,null,[[2,19],[4,13]])})))).apply(this,arguments)}function k(e){var r=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=(0,h.Z)(e);if(r){var n=(0,h.Z)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,m.Z)(this,t)}}var S=function(e){(0,u.Z)(t,e);var r=k(t);function t(e){var a;return(0,o.Z)(this,t),(a=r.call(this,e)).state={duplicateForms:[]},a}return(0,d.Z)(t,[{key:"render",value:function(){var e=this;return(0,i.jsx)(f.J9,{initialValues:{examName:"",examDate:"",licenseNumber:"",rank:"",proof:""},onSubmit:function(){var r=(0,s.Z)(n().mark((function r(t,a){var s,l,i,c,o;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=a.resetForm,l=document.getElementById("licenseForm"),i=new FormData(l),c=document.getElementById("licensureexamalert"),r.next=6,g(i,e.props.token);case 6:1==(o=r.sent).success?(c.className="alert alert-success",c.style="visibility: visible",c.innerHTML=o.message):(c.className="alert alert-danger",o.error?c.innerHTML=o.error[0].message:c.innerHTML=o.message),$("#licensureexamalert").fadeTo(5e3,500).slideUp(500,(function(){$("#licensureexamalert").slideUp(500)})),s(),x.default.push("/faculty/accomplishment");case 11:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}(),children:function(e){e.values,e.errors,e.touched;var r=e.isSubmitting;return(0,i.jsxs)(f.l0,{id:"licenseForm",children:[(0,i.jsx)("hr",{}),(0,i.jsx)("br",{}),(0,i.jsxs)("div",{className:"form-row",children:[(0,i.jsxs)("div",{className:"form-group col-md-2",children:[(0,i.jsx)("label",{htmlFor:"LicensureExam[]",children:" Licensure Exam "}),(0,i.jsx)(f.gN,{className:"form-control",type:"text",name:"examName",placeholder:"Input licensure exam"})]}),(0,i.jsxs)("div",{className:"form-group col-md-2",children:[(0,i.jsx)("label",{htmlFor:"LicensureExamDate[]",children:" Date "}),(0,i.jsx)(f.gN,{type:"date",className:"form-control",name:"examDate"})]}),(0,i.jsxs)("div",{className:"form-group col-md-2",children:[(0,i.jsx)("label",{htmlFor:"LicensureExamRank[]",children:" Rank "}),(0,i.jsx)(f.gN,{className:"form-control",type:"text",name:"rank",placeholder:"Input rank"})]}),(0,i.jsxs)("div",{className:"form-group col-md-2",children:[(0,i.jsx)("label",{htmlFor:"LicenseNumber[]",children:" License Number "}),(0,i.jsx)(f.gN,{className:"form-control",type:"text",name:"licenseNumber",placeholder:"Input licensure number"})]}),(0,i.jsxs)("div",{className:"form-group col-md-2",children:[(0,i.jsx)("label",{htmlFor:"LicensureExamProof[]",children:" Proof "}),(0,i.jsx)(f.gN,{type:"file",className:"form-control-file",name:"proof"})]})]}),(0,i.jsx)("br",{}),(0,i.jsx)("button",{type:"submit",className:"btn btn-primary col-md-12",disabled:r,children:"Submit"})]})}})}}]),t}(p.Component),I=t(61588),P=t(72939);function w(e,r){return R.apply(this,arguments)}function R(){return(R=(0,s.Z)(n().mark((function e(r,t){var a,s,l,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=y().decode(t),s=a.facultyId,e.prev=2,!t){e.next=13;break}return l="https://api.dpsmqaportal.com/api/faculty/accomplishment/"+s,""==r.get("proof")&&r.delete("proof"),""==r.get("rank")&&r.set("rank",""),e.next=9,j()({method:"PUT",url:l+"/licensure-exam",data:r,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t)}});case 9:return i=e.sent,e.abrupt("return",i.data);case 13:console.log(access.result.message);case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",e.t0);case 20:case"end":return e.stop()}}),e,null,[[2,16]])})))).apply(this,arguments)}function D(e,r){return F.apply(this,arguments)}function F(){return(F=(0,s.Z)(n().mark((function e(r,t){var a,s,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=y().decode(t),s=a.facultyId,e.prev=2,!t){e.next=15;break}return e.prev=4,e.next=7,j().delete("https://api.dpsmqaportal.com/api/faculty/accomplishment/"+s+"/licensure-exam",{headers:{Authorization:"Bearer ".concat(t)},data:{licenseId:"".concat(r)}});case 7:return l=e.sent,e.abrupt("return",l.data);case 11:return e.prev=11,e.t0=e.catch(4),console.error(e.t0),e.abrupt("return",e.t0);case 15:e.next=21;break;case 17:return e.prev=17,e.t1=e.catch(2),console.error(e.t1),e.abrupt("return",e.t1);case 21:case"end":return e.stop()}}),e,null,[[2,17],[4,11]])})))).apply(this,arguments)}function T(e,r,t,a){return L.apply(this,arguments)}function L(){return(L=(0,s.Z)(n().mark((function e(r,t,a,s){var l,i,c,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=y().decode(s),t?2==l.role?i="Verified":3==l.role&&(i="Approved"):(i="Rejected",r.set("approverRemarks",l.name+": "+r.get("approverRemarks"))),r.append("status",i),e.prev=3,!s){e.next=17;break}return e.prev=5,c="https://api.dpsmqaportal.com/api/faculty/accomplishment/"+a,e.next=9,j()({method:"PUT",url:c+"/licensure-exam",data:r,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(s)}});case 9:return o=e.sent,e.abrupt("return",o.data);case 13:return e.prev=13,e.t0=e.catch(5),console.error(e.t0),e.abrupt("return",e.t0);case 17:e.next=23;break;case 19:return e.prev=19,e.t1=e.catch(3),console.error(e.t1),e.abrupt("return",e.t1);case 23:case"end":return e.stop()}}),e,null,[[3,19],[5,13]])})))).apply(this,arguments)}function A(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function C(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?A(Object(t),!0).forEach((function(r){(0,l.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var E=function(e){var r,t=0,a=0,l=p.useState({licenseId:0,examName:"",examDate:"",licenseNumber:"",rank:"",proof:""}),o=(0,c.Z)(l,2),d=o[0],u=o[1];function m(e){a=e}return e.name,r=null!=e.children?Object.keys(e.children).map((function(r){if(null!=e.children[r].licenseId)return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:e.children[r].examName}),(0,i.jsx)("td",{children:0==e.children[r].rank?"N/A":e.children[r].rank}),(0,i.jsx)("td",{children:e.children[r].examDate}),(0,i.jsx)("td",{children:e.children[r].licenseNumber}),(0,i.jsxs)("td",{children:[e.children[r].proof&&(0,i.jsxs)("div",{className:"btn-grp",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){var t=e.children[r].proof;(0,P.Z)(t,e.token)},children:"Download"}),(0,i.jsx)("a",{className:"btn btn-info",href:"https://api.dpsmqaportal.com/"+e.children[r].proof,style:{color:"white"},target:"_blank",children:"Preview"})]}),!e.children[r].proof&&(0,i.jsx)("div",{children:"None"})]}),(0,i.jsx)("td",{children:e.children[r].status}),(0,i.jsx)("td",{children:e.children[r].approverRemarks||"None"}),(0,i.jsxs)("td",{children:[e.facultyFlag&&!e.viewFlag&&(0,i.jsxs)("div",{className:"btn-group",children:[(0,i.jsx)("a",{className:"btn btn-info","data-toggle":"modal","data-target":"#editLicensureExam",onClick:function(){var t,a;t=e.children[r].licenseId,a=t,Object.keys(e.children).map((function(r){e.children[r].licenseId==a&&(u(e.children[r]),""!=e.children[r].rank&&null!=e.children[r].rank||u((function(e){return C(C({},e),{},{rank:""})})))}))},children:"Edit"}),(0,i.jsx)("a",{className:"btn btn-danger","data-toggle":"modal","data-target":"#deleteLicensureExam",onClick:function(){var a;a=e.children[r].licenseId,t=a},children:"Delete"})]}),!e.facultyFlag&&!e.viewFlag&&(0,i.jsxs)("div",{className:"btn-grp",children:[(0,i.jsx)("a",{className:"btn btn-info","data-toggle":"modal","data-target":"#approveLicense",onClick:function(){m(e.children[r].licenseId)},children:"Approve"}),(0,i.jsx)("a",{className:"btn btn-danger","data-toggle":"modal","data-target":"#rejectLicense",onClick:function(){m(e.children[r].licenseId)},children:"Reject"})]})]})]},e.children[r].licenseId)})):(0,i.jsx)("td",{colSpan:"7",children:(0,i.jsx)("p",{align:"center",children:"No data available!"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{align:"center",children:" Licensure Exams "}),(0,i.jsx)(I.Z,{unit:e.unit,position:e.position,children:e.name}),(0,i.jsx)("div",{role:"alert",id:"licensureexamalert",style:{visibility:"hidden"}}),(0,i.jsx)("div",{className:"table-responsive",children:(0,i.jsx)("table",{className:"table table-striped table-sm",children:(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Exam Name"}),(0,i.jsx)("th",{children:"Rank"}),(0,i.jsx)("th",{children:"Date"}),(0,i.jsx)("th",{children:"License Number"}),(0,i.jsx)("th",{children:"Proof"}),(0,i.jsx)("th",{children:"Status"}),(0,i.jsx)("th",{children:"Approver Remarks"}),!e.viewFlag&&(0,i.jsx)("th",{children:"Action"})]}),r]})})}),e.facultyFlag&&(0,i.jsx)("div",{children:(0,i.jsx)(S,{token:e.token})}),(0,i.jsx)("div",{className:"modal fade",id:"editLicensureExam",tabIndex:"-1",role:"dialog","aria-labelledby":"editLicensureExamLabel","aria-hidden":"true",children:(0,i.jsx)("div",{className:"modal-dialog",role:"document",children:(0,i.jsxs)("div",{className:"modal-content",children:[(0,i.jsxs)("div",{className:"modal-header",children:[(0,i.jsx)("h5",{className:"modal-title",id:"editLicensureExamLabel",children:"Update Licensure Exam Information"}),(0,i.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,i.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,i.jsx)(f.J9,{enableReinitialize:!0,initialValues:d,onSubmit:function(){var r=(0,s.Z)(n().mark((function r(t){var a,s,l,i;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=document.getElementById("editLicForm"),(s=new FormData(a)).append("licenseId",d.licenseId),l=document.getElementById("licensureexamalert"),r.next=6,w(s,e.token);case 6:1==(i=r.sent).success?(l.className="alert alert-success",l.style="visibility: visible",l.innerHTML=i.message):(l.className="alert alert-danger",i.error?l.innerHTML=i.error[0].message:l.innerHTML=i.message),$("#licensureexamalert").fadeTo(5e3,500).slideUp(500,(function(){$("#licensureexamalert").slideUp(500)})),x.default.push("/faculty/accomplishment");case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),children:function(e){e.values,e.errors,e.touched;var r=e.isSubmitting;return(0,i.jsxs)(f.l0,{id:"editLicForm",children:[(0,i.jsxs)("div",{className:"modal-body",children:[(0,i.jsx)("hr",{}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"LicensureExamUpdate",children:" Licensure Exam "}),(0,i.jsx)(f.gN,{className:"form-control",type:"text",name:"examName",id:"examName",placeholder:"Input licensure exam"})]})}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"LicensureExamDateUpdate",children:" Date "}),(0,i.jsx)(f.gN,{type:"date",className:"form-control",name:"examDate",id:"examDate"})]})}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"LicensureExamRankUpdate",children:" Rank "}),(0,i.jsx)(f.gN,{className:"form-control",type:"text",name:"rank",id:"rank",placeholder:"Input rank"})]})}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"LicenseNumeberUpdate",children:" License Number "}),(0,i.jsx)(f.gN,{className:"form-control",type:"text",name:"licenseNumber",id:"licenseNumber",placeholder:"Input licensure number"})]})}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"LicensureExamProofUpdate",children:" Proof "}),(0,i.jsx)(f.gN,{type:"file",className:"form-control-file",name:"proof",id:"proof",value:void 0})]})})]}),(0,i.jsxs)("div",{className:"modal-footer",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"Close"}),(0,i.jsx)("button",{type:"submit",className:"btn btn-primary","data-dismiss":"modal",disabled:r,onClick:function(){$("#editLicensureExam").modal("toggle")},children:"Save changes"})]})]})}})]})})}),(0,i.jsx)("div",{className:"modal fade",id:"deleteLicensureExam",tabIndex:"-1",role:"dialog","aria-labelledby":"deleteLicensureExamLabel","aria-hidden":"true",children:(0,i.jsx)("div",{className:"modal-dialog",role:"document",children:(0,i.jsxs)("div",{className:"modal-content",children:[(0,i.jsxs)("div",{className:"modal-header",children:[(0,i.jsx)("h5",{className:"modal-title",id:"deleteLicensureExamLabel",children:"Delete Licensure Exam Information"}),(0,i.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,i.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,i.jsxs)("div",{className:"modal-body",children:[(0,i.jsx)("hr",{}),(0,i.jsx)("p",{children:" Are you sure you want to delete this education information? "})]}),(0,i.jsxs)("div",{className:"modal-footer",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"No, don't delete"}),(0,i.jsx)("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:(0,s.Z)(n().mark((function r(){var a,s;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=document.getElementById("licensureexamalert"),r.next=3,D(t,e.token);case 3:1==(s=r.sent).success?(a.className="alert alert-success",a.style="visibility: visible",a.innerHTML=s.message):(a.className="alert alert-danger",s.error?a.innerHTML=s.error[0].message:a.innerHTML=s.message),$("#licensureexamalert").fadeTo(5e3,500).slideUp(500,(function(){$("#licensureexamalert").slideUp(500)})),x.default.push("/faculty/accomplishment");case 7:case"end":return r.stop()}}),r)}))),children:"Yes, delete"})]})]})})}),(0,i.jsx)("div",{className:"modal fade",id:"approveLicense",tabIndex:"-1",role:"dialog","aria-labelledby":"approveLicenseLabel","aria-hidden":"true",children:(0,i.jsx)("div",{className:"modal-dialog",role:"document",children:(0,i.jsxs)("div",{className:"modal-content",children:[(0,i.jsxs)("div",{className:"modal-header",children:[(0,i.jsx)("h5",{className:"modal-title",id:"approveLicenseLabel",children:"Approve Licensure Exam Information"}),(0,i.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,i.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,i.jsxs)("div",{className:"modal-body",children:[(0,i.jsx)("hr",{}),(0,i.jsx)("p",{children:" Are you sure you want to approve this licensure exam information? "})]}),(0,i.jsxs)("div",{className:"modal-footer",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"No, don't approve"}),(0,i.jsx)("button",{type:"button",className:"btn btn-danger",onClick:(0,s.Z)(n().mark((function r(){var t,s,l;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=document.getElementById("licensureexamalert"),$("#approveLicense").modal("toggle"),(s=new FormData).append("licenseId",a),r.next=6,T(s,!0,e.facultyId,e.token);case 6:1==(l=r.sent).success?(t.className="alert alert-success",t.style="visibility: visible",t.innerHTML=l.message):(t.className="alert alert-danger",t.style="visibility: visible",l.error?t.innerHTML=l.error[0].message:t.innerHTML=l.message),$("#licensureexamalert").fadeTo(5e3,500).slideUp(500,(function(){$("#licensureexamalert").slideUp(500)})),x.default.push("/faculty/approval/"+e.facultyId,"/faculty/approval/"+e.facultyId);case 10:case"end":return r.stop()}}),r)}))),children:"Yes, approve"})]})]})})}),(0,i.jsx)("div",{className:"modal fade",id:"rejectLicense",tabIndex:"-1",role:"dialog","aria-labelledby":"rejectLicenseLabel","aria-hidden":"true",children:(0,i.jsx)("div",{className:"modal-dialog",role:"document",children:(0,i.jsxs)("div",{className:"modal-content",children:[(0,i.jsxs)("div",{className:"modal-header",children:[(0,i.jsx)("h5",{className:"modal-title",id:"rejectLicenseLabel",children:"Reject Licensure Exam Information"}),(0,i.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,i.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,i.jsx)(f.J9,{enableReinitialize:!0,initialValues:d,onSubmit:function(){var r=(0,s.Z)(n().mark((function r(t){var s,l,i,c;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=document.getElementById("licensureexamalert"),$("#rejectLicense").modal("toggle"),l=document.getElementById("rejectLicenseForm"),(i=new FormData(l)).append("licenseId",a),r.next=7,T(i,!1,e.facultyId,e.token);case 7:1==(c=r.sent).success?(s.className="alert alert-success",s.style="visibility: visible",s.innerHTML=c.message):(s.className="alert alert-danger",s.style="visibility: visible",c.error?s.innerHTML=c.error[0].message:s.innerHTML=c.message),$("#licensureexamalert").fadeTo(5e3,500).slideUp(500,(function(){$("#licensureexamalert").slideUp(500)})),x.default.push("/faculty/approval/"+e.facultyId,"/faculty/approval/"+e.facultyId);case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),children:function(e){e.values,e.errors,e.touched;var r=e.isSubmitting;return(0,i.jsxs)(f.l0,{id:"rejectLicenseForm",children:[(0,i.jsxs)("div",{className:"modal-body",children:[(0,i.jsx)("hr",{}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"RejectionRemarks",children:" Reason/Remarks for Rejection "}),(0,i.jsx)(f.gN,{className:"form-control",type:"text",name:"approverRemarks",placeholder:"Input remarks",required:!0})]})})]}),(0,i.jsxs)("div",{className:"modal-footer",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"Close"}),(0,i.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:r,onClick:function(){$("#rejectLicense").modal("toggle")},children:"Save changes"})]})]})}})]})})})]})}},5121:function(e,r,t){"use strict";t.d(r,{Z:function(){return E}});var a=t(809),n=t.n(a),s=t(92447),l=t(26265),i=t(85893),c=t(64121),o=(t(41664),t(74047)),d=t(52700),u=t(8127),m=t(58580),h=t(20775),p=t(67294),f=t(17513),x=t(11163),b=t(9669),j=t.n(b),v=t(49704),y=t.n(v);function g(e,r){return N.apply(this,arguments)}function N(){return(N=(0,s.Z)(n().mark((function e(r,t){var a,s,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=y().decode(t),s=a.facultyId,e.prev=2,!t){e.next=18;break}return e.prev=4,""==r.get("endDate")&&r.delete("endDate"),r.append("facultyId",s),r.append("status","Pending"),e.next=10,j()({method:"POST",url:"https://api.dpsmqaportal.com/api/faculty/accomplishment/add/public-service",data:r,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t)}});case 10:return l=e.sent,e.abrupt("return",l.data);case 14:return e.prev=14,e.t0=e.catch(4),console.error(e.t0),e.abrupt("return",e.t0);case 18:e.next=24;break;case 20:return e.prev=20,e.t1=e.catch(2),console.error(e.t1),e.abrupt("return",e.t1);case 24:case"end":return e.stop()}}),e,null,[[2,20],[4,14]])})))).apply(this,arguments)}function k(e){var r=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=(0,h.Z)(e);if(r){var n=(0,h.Z)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,m.Z)(this,t)}}var S=function(e){(0,u.Z)(t,e);var r=k(t);function t(e){return(0,o.Z)(this,t),r.call(this,e)}return(0,d.Z)(t,[{key:"render",value:function(){var e=this;return(0,i.jsx)(f.J9,{initialValues:{type:"",position:"",organization:"",description:"",startDate:"",endDate:"",proof:""},onSubmit:function(){var r=(0,s.Z)(n().mark((function r(t,a){var s,l,i,c,o;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=a.resetForm,l=document.getElementById("psForm"),i=new FormData(l),c=document.getElementById("publicservicealert"),r.next=6,g(i,e.props.token);case 6:1==(o=r.sent).success?(c.className="alert alert-success",c.style="visibility: visible",c.innerHTML=o.message):(c.className="alert alert-danger",o.error?c.innerHTML=o.error[0].message:c.innerHTML=o.message),$("#publicservicealert").fadeTo(5e3,500).slideUp(500,(function(){$("#publicservicealert").slideUp(500)})),s(),x.default.push("/faculty/accomplishment");case 11:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}(),children:function(e){e.values,e.errors,e.touched;var r=e.isSubmitting;return(0,i.jsxs)(f.l0,{id:"psForm",children:[(0,i.jsx)("hr",{}),(0,i.jsx)("br",{}),(0,i.jsxs)("div",{className:"form-row",children:[(0,i.jsxs)("div",{className:"form-group col-md-2",children:[(0,i.jsx)("label",{htmlFor:"PublicServicePosition[]",children:" Position/Role "}),(0,i.jsx)(f.gN,{className:"form-control",type:"text",name:"position",id:"position",placeholder:"Input position/role"})]}),(0,i.jsxs)("div",{className:"form-group col-md-2",children:[(0,i.jsx)("label",{htmlFor:"PublicServiceOrganization[]",children:" Organization "}),(0,i.jsx)(f.gN,{className:"form-control",type:"text",name:"organization",id:"organization",placeholder:"Input organization"})]}),(0,i.jsxs)("div",{className:"form-group col-md-2",children:[(0,i.jsx)("label",{htmlFor:"PublicServiceAccomplishmentStartDate[]",children:" Start Date "}),(0,i.jsx)(f.gN,{type:"date",className:"form-control",name:"startDate",id:"startDate"})]}),(0,i.jsxs)("div",{className:"form-group col-md-2",children:[(0,i.jsx)("label",{htmlFor:"PublicServiceAccomplishmentEndDate[]",children:" End Date "}),(0,i.jsx)(f.gN,{type:"date",className:"form-control",name:"endDate",id:"endDate"})]}),(0,i.jsxs)("div",{className:"form-group col-md-2",children:[(0,i.jsx)("label",{htmlFor:"PublicServiceAccomplishmentProof[]",children:" Proof "}),(0,i.jsx)(f.gN,{type:"file",className:"form-control-file",name:"proof",id:"proof"})]})]}),(0,i.jsxs)("div",{className:"form-row",children:[(0,i.jsxs)("div",{className:"form-group col-md-4",children:[(0,i.jsx)("label",{htmlFor:"PublicServiceAccomplishmentType[]",children:" Type of Contribution "}),(0,i.jsxs)(f.gN,{as:"select",className:"form-control",name:"type",id:"type",required:!0,children:[(0,i.jsx)("option",{value:"Within UPM",children:"Within UPM"}),(0,i.jsx)("option",{value:"Within Pro",children:"Contribution to the Profession"}),(0,i.jsx)("option",{value:"Within Nat",children:"Contribution to the Nation"}),(0,i.jsx)("option",{value:"Within Wor",children:"Contribution to the World"})]})]}),(0,i.jsxs)("div",{className:"form-group col-md-6",children:[(0,i.jsx)("label",{htmlFor:"PublicServiceAccomplishmentDescription[]",children:" Description "}),(0,i.jsx)(f.gN,{className:"form-control",type:"text",name:"description",id:"description",placeholder:"Input description"})]})]}),(0,i.jsx)("br",{}),(0,i.jsx)("button",{type:"submit",className:"btn btn-primary col-md-12",disabled:r,children:"Submit"}),(0,i.jsx)("hr",{})]})}})}}]),t}(p.Component),I=t(61588),P=t(72939);function w(e,r){return R.apply(this,arguments)}function R(){return(R=(0,s.Z)(n().mark((function e(r,t){var a,s,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=y().decode(t),s=a.facultyId,e.prev=2,!t){e.next=15;break}return e.prev=4,e.next=7,j().delete("https://api.dpsmqaportal.com/api/faculty/accomplishment/"+s+"/public-service",{headers:{Authorization:"Bearer ".concat(t)},data:{publicServiceId:"".concat(r)}});case 7:return l=e.sent,e.abrupt("return",l.data);case 11:return e.prev=11,e.t0=e.catch(4),console.error(e.t0),e.abrupt("return",e.t0);case 15:e.next=21;break;case 17:return e.prev=17,e.t1=e.catch(2),console.error(e.t1),e.abrupt("return",e.t1);case 21:case"end":return e.stop()}}),e,null,[[2,17],[4,11]])})))).apply(this,arguments)}function D(e,r){return F.apply(this,arguments)}function F(){return(F=(0,s.Z)(n().mark((function e(r,t){var a,s,l,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=y().decode(t),s=a.facultyId,e.prev=2,!t){e.next=14;break}return l="https://api.dpsmqaportal.com/api/faculty/accomplishment/"+s,{headers:{Authorization:"Bearer "+t}},""==r.get("proof")&&r.delete("proof"),""==r.get("endDate")&&r.delete("endDate"),e.next=10,j()({method:"PUT",url:l+"/public-service",data:r,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t)}});case 10:return i=e.sent,e.abrupt("return",i.data);case 14:console.log(access.result.message);case 15:e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",e.t0);case 21:case"end":return e.stop()}}),e,null,[[2,17]])})))).apply(this,arguments)}function T(e,r,t,a){return L.apply(this,arguments)}function L(){return(L=(0,s.Z)(n().mark((function e(r,t,a,s){var l,i,c,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=y().decode(s),t?2==l.role?i="Verified":3==l.role&&(i="Approved"):(i="Rejected",r.set("approverRemarks",l.name+": "+r.get("approverRemarks"))),r.append("status",i),e.prev=3,!s){e.next=17;break}return e.prev=5,c="https://api.dpsmqaportal.com/api/faculty/accomplishment/"+a,e.next=9,j()({method:"PUT",url:c+"/public-service",data:r,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(s)}});case 9:return o=e.sent,e.abrupt("return",o.data);case 13:return e.prev=13,e.t0=e.catch(5),console.error(e.t0),e.abrupt("return",e.t0);case 17:e.next=23;break;case 19:return e.prev=19,e.t1=e.catch(3),console.error(e.t1),e.abrupt("return",e.t1);case 23:case"end":return e.stop()}}),e,null,[[3,19],[5,13]])})))).apply(this,arguments)}function A(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function C(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?A(Object(t),!0).forEach((function(r){(0,l.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var E=function(e){e.name;var r,t,a=0,l=0,o=0,d=p.useState({publicServiceId:0,position:"",organization:"",description:"",type:"",startDate:"",endDate:""}),u=(0,c.Z)(d,2),m=u[0],h=u[1],b=null,j=null;function v(e){l=e}function y(e){a=e}function g(e){o=e}function N(r){Object.keys(e.children).map((function(t){e.children[t].publicServiceId==r&&(h(e.children[t]),""!=e.children[t].endDate&&null!=e.children[t].endDate||h((function(e){return C(C({},e),{},{endDate:""})})))}))}return null!=e.children&&(b=Object.keys(e.children).map((function(r){if("Within UPM"==e.children[r].type)return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:e.children[r].position}),(0,i.jsx)("td",{children:e.children[r].organization}),(0,i.jsx)("td",{children:e.children[r].description}),(0,i.jsx)("td",{children:e.children[r].startDate}),(0,i.jsx)("td",{children:e.children[r].endDate}),(0,i.jsxs)("td",{children:[e.children[r].proof&&(0,i.jsxs)("div",{className:"btn-grp",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){var t=e.children[r].proof;(0,P.Z)(t,e.token)},children:"Download"}),(0,i.jsx)("a",{className:"btn btn-info",href:"https://api.dpsmqaportal.com/"+e.children[r].proof,style:{color:"white"},target:"_blank",children:"Preview"})]}),!e.children[r].proof&&(0,i.jsx)("div",{children:"None"})]}),(0,i.jsx)("td",{children:e.children[r].status}),(0,i.jsx)("td",{children:e.children[r].approverRemarks||"None"}),!e.viewFlag&&(0,i.jsxs)("td",{children:[e.facultyFlag&&(0,i.jsxs)("div",{className:"btn-group",children:[(0,i.jsx)("a",{className:"btn btn-info","data-toggle":"modal","data-target":"#editPublicService",onClick:function(){v(e.children[r].publicServiceId),N(l)},children:"Edit"}),(0,i.jsx)("a",{className:"btn btn-danger","data-toggle":"modal","data-target":"#deletePublicService",onClick:function(){y(e.children[r].publicServiceId)},children:"Delete"})]}),!e.facultyFlag&&(0,i.jsxs)("div",{className:"btn-grp",children:[(0,i.jsx)("a",{className:"btn btn-info","data-toggle":"modal","data-target":"#approvePublicService",onClick:function(){g(e.children[r].publicServiceId)},children:"Approve"}),(0,i.jsx)("a",{className:"btn btn-danger","data-toggle":"modal","data-target":"#rejectPublicService",onClick:function(){g(e.children[r].publicServiceId)},children:"Reject"})]})]})]},e.children[r].publicServiceId)})),j=Object.keys(e.children).map((function(r){if("Within Pro"==e.children[r].type)return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:e.children[r].position}),(0,i.jsx)("td",{children:e.children[r].organization}),(0,i.jsx)("td",{children:e.children[r].description}),(0,i.jsx)("td",{children:e.children[r].startDate}),(0,i.jsx)("td",{children:e.children[r].endDate}),(0,i.jsxs)("td",{children:[e.children[r].proof&&(0,i.jsxs)("div",{className:"btn-grp",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){var t=e.children[r].proof;(0,P.Z)(t,e.token)},children:"Download"}),(0,i.jsx)("a",{className:"btn btn-info",href:"https://api.dpsmqaportal.com/"+e.children[r].proof,style:{color:"white"},target:"_blank",children:"Preview"})]}),!e.children[r].proof&&(0,i.jsx)("div",{children:"None"})]}),(0,i.jsx)("td",{children:e.children[r].status}),(0,i.jsx)("td",{children:e.children[r].approverRemarks||"None"}),!e.viewFlag&&(0,i.jsxs)("td",{children:[e.facultyFlag&&(0,i.jsxs)("div",{className:"btn-group",children:[(0,i.jsx)("a",{className:"btn btn-info","data-toggle":"modal","data-target":"#editPublicService",onClick:function(){v(e.children[r].publicServiceId),N(l)},children:"Edit"}),(0,i.jsx)("a",{className:"btn btn-danger","data-toggle":"modal","data-target":"#deletePublicService",onClick:function(){y(e.children[r].publicServiceId)},children:"Delete"})]}),!e.facultyFlag&&(0,i.jsxs)("div",{className:"btn-grp",children:[(0,i.jsx)("a",{className:"btn btn-info","data-toggle":"modal","data-target":"#approvePublicService",onClick:function(){g(e.children[r].publicServiceId)},children:"Approve"}),(0,i.jsx)("a",{className:"btn btn-danger","data-toggle":"modal","data-target":"#rejectPublicService",onClick:function(){g(e.children[r].publicServiceId)},children:"Reject"})]})]})]},e.children[r].publicServiceId)})),r=Object.keys(e.children).map((function(r){if("Within Nat"==e.children[r].type)return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:e.children[r].position}),(0,i.jsx)("td",{children:e.children[r].organization}),(0,i.jsx)("td",{children:e.children[r].description}),(0,i.jsx)("td",{children:e.children[r].startDate}),(0,i.jsx)("td",{children:e.children[r].endDate}),(0,i.jsxs)("td",{children:[e.children[r].proof&&(0,i.jsxs)("div",{className:"btn-grp",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){var t=e.children[r].proof;(0,P.Z)(t,e.token)},children:"Download"}),(0,i.jsx)("a",{className:"btn btn-info",href:"https://api.dpsmqaportal.com/"+e.children[r].proof,style:{color:"white"},target:"_blank",children:"Preview"})]}),!e.children[r].proof&&(0,i.jsx)("div",{children:"None"})]}),(0,i.jsx)("td",{children:e.children[r].status}),(0,i.jsx)("td",{children:e.children[r].approverRemarks||"None"}),!e.viewFlag&&(0,i.jsxs)("td",{children:[e.facultyFlag&&(0,i.jsxs)("div",{className:"btn-group",children:[(0,i.jsx)("a",{className:"btn btn-info","data-toggle":"modal","data-target":"#editPublicService",onClick:function(){v(e.children[r].publicServiceId),N(l)},children:"Edit"}),(0,i.jsx)("a",{className:"btn btn-danger","data-toggle":"modal","data-target":"#deletePublicService",onClick:function(){y(e.children[r].publicServiceId)},children:"Delete"})]}),!e.facultyFlag&&(0,i.jsxs)("div",{className:"btn-grp",children:[(0,i.jsx)("a",{className:"btn btn-info","data-toggle":"modal","data-target":"#approvePublicService",onClick:function(){g(e.children[r].publicServiceId)},children:"Approve"}),(0,i.jsx)("a",{className:"btn btn-danger","data-toggle":"modal","data-target":"#rejectPublicService",onClick:function(){g(e.children[r].publicServiceId)},children:"Reject"})]})]})]},e.children[r].publicServiceId)})),t=Object.keys(e.children).map((function(r){if("Within Wor"==e.children[r].type)return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:e.children[r].position}),(0,i.jsx)("td",{children:e.children[r].organization}),(0,i.jsx)("td",{children:e.children[r].description}),(0,i.jsx)("td",{children:e.children[r].startDate}),(0,i.jsx)("td",{children:e.children[r].endDate}),(0,i.jsxs)("td",{children:[e.children[r].proof&&(0,i.jsxs)("div",{className:"btn-grp",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){var t=e.children[r].proof;(0,P.Z)(t,e.token)},children:"Download"}),(0,i.jsx)("a",{className:"btn btn-info",href:"https://api.dpsmqaportal.com/"+e.children[r].proof,style:{color:"white"},target:"_blank",children:"Preview"})]}),!e.children[r].proof&&(0,i.jsx)("div",{children:"None"})]}),(0,i.jsx)("td",{children:e.children[r].status}),(0,i.jsx)("td",{children:e.children[r].approverRemarks||"None"}),!e.viewFlag&&(0,i.jsxs)("td",{children:[e.facultyFlag&&(0,i.jsxs)("div",{className:"btn-group",children:[(0,i.jsx)("a",{className:"btn btn-info","data-toggle":"modal","data-target":"#editPublicService",onClick:function(){v(e.children[r].publicServiceId),N(l)},children:"Edit"}),(0,i.jsx)("a",{className:"btn btn-danger","data-toggle":"modal","data-target":"#deletePublicService",onClick:function(){y(e.children[r].publicServiceId)},children:"Delete"})]}),!e.facultyFlag&&(0,i.jsxs)("div",{className:"btn-grp",children:[(0,i.jsx)("a",{className:"btn btn-info","data-toggle":"modal","data-target":"#approvePublicService",onClick:function(){g(e.children[r].publicServiceId)},children:"Approve"}),(0,i.jsx)("a",{className:"btn btn-danger","data-toggle":"modal","data-target":"#rejectPublicService",onClick:function(){g(e.children[r].publicServiceId)},children:"Reject"})]})]})]},e.children[r].publicServiceId)}))),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{align:"center",children:" Public Service Accomplishments "}),(0,i.jsx)(I.Z,{unit:e.unit,position:e.position,children:e.name}),(0,i.jsx)("div",{role:"alert",id:"publicservicealert",style:{visibility:"hidden"}}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h5",{align:"center",children:"Within UP Manila "}),(0,i.jsx)("div",{className:"table-responsive",children:(0,i.jsx)("table",{className:"table table-striped table-sm",children:(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Position/Role"}),(0,i.jsx)("th",{children:"Organization"}),(0,i.jsx)("th",{children:"Description"}),(0,i.jsx)("th",{children:"Start Date"}),(0,i.jsx)("th",{children:"End Date"}),(0,i.jsx)("th",{children:"Proof"}),(0,i.jsx)("th",{children:"Status"}),(0,i.jsx)("th",{children:"Approver Remarks"}),!e.viewFlag&&(0,i.jsx)("th",{children:"Action"})]}),b||(0,i.jsx)("td",{colSpan:"8",children:(0,i.jsx)("p",{align:"center",children:"No data available!"})})]})})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("br",{}),(0,i.jsx)("h5",{align:"center",children:" Contributions to Profession "}),(0,i.jsx)("div",{className:"table-responsive",children:(0,i.jsx)("table",{className:"table table-striped table-sm",children:(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Position/Role"}),(0,i.jsx)("th",{children:"Organization"}),(0,i.jsx)("th",{children:"Description"}),(0,i.jsx)("th",{children:"Start Date"}),(0,i.jsx)("th",{children:"End Date"}),(0,i.jsx)("th",{children:"Proof"}),(0,i.jsx)("th",{children:"Status"}),(0,i.jsx)("th",{children:"Approver Remarks"}),!e.viewFlag&&(0,i.jsx)("th",{children:"Action"})]}),j||(0,i.jsx)("td",{colSpan:"8",children:(0,i.jsx)("p",{align:"center",children:"No data available!"})})]})})}),(0,i.jsx)("br",{}),(0,i.jsx)("h5",{align:"center",children:" Contributions to the Nation "}),(0,i.jsx)("div",{className:"table-responsive",children:(0,i.jsx)("table",{className:"table table-striped table-sm",children:(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Position/Role"}),(0,i.jsx)("th",{children:"Organization"}),(0,i.jsx)("th",{children:"Description"}),(0,i.jsx)("th",{children:"Start Date"}),(0,i.jsx)("th",{children:"End Date"}),(0,i.jsx)("th",{children:"Proof"}),(0,i.jsx)("th",{children:"Status"}),(0,i.jsx)("th",{children:"Approver Remarks"}),!e.viewFlag&&(0,i.jsx)("th",{children:"Action"})]}),r||(0,i.jsx)("td",{colSpan:"8",children:(0,i.jsx)("p",{align:"center",children:"No data available!"})})]})})}),(0,i.jsx)("br",{}),(0,i.jsx)("h5",{align:"center",children:" Contributions to the World "}),(0,i.jsx)("div",{className:"table-responsive",children:(0,i.jsx)("table",{className:"table table-striped table-sm",children:(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Position/Role"}),(0,i.jsx)("th",{children:"Organization"}),(0,i.jsx)("th",{children:"Description"}),(0,i.jsx)("th",{children:"Start Date"}),(0,i.jsx)("th",{children:"End Date"}),(0,i.jsx)("th",{children:"Proof"}),(0,i.jsx)("th",{children:"Status"}),(0,i.jsx)("th",{children:"Approver Remarks"}),!e.viewFlag&&(0,i.jsx)("th",{children:"Action"})]}),t||(0,i.jsx)("td",{colSpan:"8",children:(0,i.jsx)("p",{align:"center",children:"No data available!"})})]})})})]}),e.facultyFlag&&(0,i.jsx)("div",{children:(0,i.jsx)(S,{token:e.token})}),(0,i.jsx)("div",{className:"modal fade",id:"editPublicService",tabIndex:"-1",role:"dialog","aria-labelledby":"editPublicServiceLabel","aria-hidden":"true",children:(0,i.jsx)("div",{className:"modal-dialog",role:"document",children:(0,i.jsxs)("div",{className:"modal-content",children:[(0,i.jsxs)("div",{className:"modal-header",children:[(0,i.jsx)("h5",{className:"modal-title",id:"editPublicServiceLabel",children:"Update Public Service Accomplishment Information"}),(0,i.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,i.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,i.jsx)(f.J9,{enableReinitialize:!0,initialValues:m,onSubmit:function(){var r=(0,s.Z)(n().mark((function r(t){var a,s,l,i;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=document.getElementById("editPSForm"),(s=new FormData(a)).append("publicServiceId",m.publicServiceId),s.append("type",m.type),l=document.getElementById("publicservicealert"),r.next=7,D(s,e.token);case 7:1==(i=r.sent).success?(l.className="alert alert-success",l.style="visibility: visible",l.innerHTML=i.message):(l.className="alert alert-danger",i.error?l.innerHTML=i.error[0].message:l.innerHTML=i.message),$("#publicservicealert").fadeTo(5e3,500).slideUp(500,(function(){$("#publicservicealert").slideUp(500)})),x.default.push("/faculty/accomplishment");case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),children:function(e){e.values,e.errors,e.touched;var r=e.isSubmitting;return(0,i.jsxs)(f.l0,{id:"editPSForm",children:[(0,i.jsxs)("div",{className:"modal-body",children:[(0,i.jsx)("hr",{}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"PublicServicePositionUpdate",children:" Position/Role "}),(0,i.jsx)(f.gN,{className:"form-control",type:"text",name:"position",id:"position",placeholder:"Input position/role"})]})}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"PublicServiceOrganizationUpdate",children:" Organization "}),(0,i.jsx)(f.gN,{className:"form-control",type:"text",name:"organization",id:"organization",placeholder:"Input organization"})]})}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"PublicServiceAccomplishmentStartDateUpdate",children:" Start Date "}),(0,i.jsx)(f.gN,{type:"date",className:"form-control",name:"startDate",id:"startDate"})]})}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"PublicServiceAccomplishmentEndDateUpdate",children:" End Date "}),(0,i.jsx)(f.gN,{type:"date",className:"form-control",name:"endDate",id:"endDate"})]})}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-group col-md-12",children:[(0,i.jsx)("label",{htmlFor:"PublicServiceAccomplishmentDescriptionUpdate",children:" Description "}),(0,i.jsx)(f.gN,{className:"form-control",type:"text",name:"description",id:"description",placeholder:"Input description"})]})}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"PublicServiceAccomplishmentProofUpdate",children:" Proof "}),(0,i.jsx)(f.gN,{type:"file",className:"form-control-file",name:"proof",id:"proof",value:void 0})]})})]}),(0,i.jsxs)("div",{className:"modal-footer",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"Close"}),(0,i.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:r,onClick:function(){$("#editPublicService").modal("toggle")},children:"Save changes"})]})]})}})]})})}),(0,i.jsx)("div",{className:"modal fade",id:"deletePublicService",tabIndex:"-1",role:"dialog","aria-labelledby":"deletePublicServiceLabel","aria-hidden":"true",children:(0,i.jsx)("div",{className:"modal-dialog",role:"document",children:(0,i.jsxs)("div",{className:"modal-content",children:[(0,i.jsxs)("div",{className:"modal-header",children:[(0,i.jsx)("h5",{className:"modal-title",id:"deletePublicServiceLabel",children:"Delete Public Service Accomplishment Information"}),(0,i.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,i.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,i.jsxs)("div",{className:"modal-body",children:[(0,i.jsx)("hr",{}),(0,i.jsx)("p",{children:" Are you sure you want to delete this public service accomplishment information? "})]}),(0,i.jsxs)("div",{className:"modal-footer",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"No, don't delete"}),(0,i.jsx)("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:(0,s.Z)(n().mark((function r(){var t,s;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=document.getElementById("publicservicealert"),r.next=3,w(a,e.token);case 3:1==(s=r.sent).success?(t.className="alert alert-success",t.style="visibility: visible",t.innerHTML=s.message):(t.className="alert alert-danger",s.error?t.innerHTML=s.error[0].message:t.innerHTML=s.message),$("#publicservicealert").fadeTo(5e3,500).slideUp(500,(function(){$("#publicservicealert").slideUp(500)})),x.default.push("/faculty/accomplishment");case 7:case"end":return r.stop()}}),r)}))),children:"Yes, delete"})]})]})})}),(0,i.jsx)("div",{className:"modal fade",id:"approvePublicService",tabIndex:"-1",role:"dialog","aria-labelledby":"approvePublicServiceLabel","aria-hidden":"true",children:(0,i.jsx)("div",{className:"modal-dialog",role:"document",children:(0,i.jsxs)("div",{className:"modal-content",children:[(0,i.jsxs)("div",{className:"modal-header",children:[(0,i.jsx)("h5",{className:"modal-title",id:"approvePublicServiceLabel",children:"Approve Public Service Information"}),(0,i.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,i.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,i.jsxs)("div",{className:"modal-body",children:[(0,i.jsx)("hr",{}),(0,i.jsx)("p",{children:" Are you sure you want to approve this public service information? "})]}),(0,i.jsxs)("div",{className:"modal-footer",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"No, don't approve"}),(0,i.jsx)("button",{type:"button",className:"btn btn-danger",onClick:(0,s.Z)(n().mark((function r(){var t,a,s;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=document.getElementById("publicservicealert"),$("#approvePublicService").modal("toggle"),(a=new FormData).append("publicServiceId",o),r.next=6,T(a,!0,e.facultyId,e.token);case 6:1==(s=r.sent).success?(t.className="alert alert-success",t.style="visibility: visible",t.innerHTML=s.message):(t.className="alert alert-danger",t.style="visibility: visible",s.error?t.innerHTML=s.error[0].message:t.innerHTML=s.message),$("#publicservicealert").fadeTo(5e3,500).slideUp(500,(function(){$("#publicservicealert").slideUp(500)})),x.default.push("/faculty/approval/"+e.facultyId,"/faculty/approval/"+e.facultyId);case 10:case"end":return r.stop()}}),r)}))),children:"Yes, approve"})]})]})})}),(0,i.jsx)("div",{className:"modal fade",id:"rejectPublicService",tabIndex:"-1",role:"dialog","aria-labelledby":"rejectPublicServiceLabel","aria-hidden":"true",children:(0,i.jsx)("div",{className:"modal-dialog",role:"document",children:(0,i.jsxs)("div",{className:"modal-content",children:[(0,i.jsxs)("div",{className:"modal-header",children:[(0,i.jsx)("h5",{className:"modal-title",id:"rejectPublicServiceLabel",children:"Reject Public Service Information"}),(0,i.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,i.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,i.jsx)(f.J9,{enableReinitialize:!0,initialValues:m,onSubmit:function(){var r=(0,s.Z)(n().mark((function r(t){var a,s,l,i;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=document.getElementById("publicservicealert"),$("#rejectPublicService").modal("toggle"),s=document.getElementById("rejectPublicServiceForm"),(l=new FormData(s)).append("publicServiceId",o),r.next=7,T(l,!1,e.facultyId,e.token);case 7:1==(i=r.sent).success?(a.className="alert alert-success",a.style="visibility: visible",a.innerHTML=i.message):(a.className="alert alert-danger",a.style="visibility: visible",i.error?a.innerHTML=i.error[0].message:a.innerHTML=i.message),$("#publicservicealert").fadeTo(5e3,500).slideUp(500,(function(){$("#publicservicealert").slideUp(500)})),x.default.push("/faculty/approval/"+e.facultyId,"/faculty/approval/"+e.facultyId);case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),children:function(e){e.values,e.errors,e.touched;var r=e.isSubmitting;return(0,i.jsxs)(f.l0,{id:"rejectPublicServiceForm",children:[(0,i.jsxs)("div",{className:"modal-body",children:[(0,i.jsx)("hr",{}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"RejectionRemarks",children:" Reason/Remarks for Rejection "}),(0,i.jsx)(f.gN,{className:"form-control",type:"text",name:"approverRemarks",placeholder:"Input remarks",required:!0})]})})]}),(0,i.jsxs)("div",{className:"modal-footer",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"Close"}),(0,i.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:r,onClick:function(){$("#rejectPublicService").modal("toggle")},children:"Save changes"})]})]})}})]})})})]})}},3270:function(e,r,t){"use strict";t.d(r,{Z:function(){return U}});var a=t(809),n=t.n(a),s=t(92447),l=t(85893),i=t(64121),c=(t(41664),t(74047)),o=t(52700),d=t(8127),u=t(58580),m=t(20775),h=t(67294),p=t(89609);function f(e){var r=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=(0,m.Z)(e);if(r){var n=(0,m.Z)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,u.Z)(this,t)}}var x=function(e){(0,d.Z)(t,e);var r=f(t);function t(e){var a;return(0,c.Z)(this,t),(a=r.call(this,e)).state={duplicateAuthors:[]},a}return(0,o.Z)(t,[{key:"clone",value:function(){var e=this,r=Object.keys(this.props.faculty).map((function(r){return(0,l.jsx)("option",{value:e.props.faculty[r].facultyId,children:e.props.faculty[r].lastName+", "+e.props.faculty[r].firstName})}));this.state.duplicateAuthors.push((0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"form-row",children:(0,l.jsxs)("div",{className:"form-group col-md-6",children:[(0,l.jsx)("label",{htmlFor:"PublicationAuthorDPSM[]",children:" Author (from DPSM) "}),(0,l.jsx)("select",{className:"form-control col-md-6",name:"PublicationAuthorDPSM[]",required:!0,children:r})]})})})),this.setState({})}},{key:"remove",value:function(){this.state.duplicateAuthors.pop(),this.setState({})}},{key:"render",value:function(){var e=this,r=Object.keys(this.props.faculty).map((function(r){return(0,l.jsx)("option",{value:e.props.faculty[r].facultyId,children:e.props.faculty[r].lastName+", "+e.props.faculty[r].firstName})}));return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"form-row",children:(0,l.jsxs)("div",{className:"form-group col-md-12",children:[(0,l.jsx)("label",{htmlFor:"PublicationAuthorDPSM[]",children:" Authors (from DPSM) "}),(0,l.jsx)(p.ZP,{className:"col-md-12",name:"PublicationAuthorDPSM[]",isMulti:!0,options:r,required:!0})]})}),(0,l.jsx)("div",{children:this.state.duplicateAuthors})]})}}]),t}(h.Component),b=t(17513),j=t(11163),v=t(9669),y=t.n(v),g=t(49704),N=t.n(g);function k(e,r){var t;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"===typeof e)return S(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return S(e,r)}(e))||r&&e&&"number"===typeof e.length){t&&(e=t);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,l=!0,i=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return l=e.done,e},e:function(e){i=!0,s=e},f:function(){try{l||null==t.return||t.return()}finally{if(i)throw s}}}}function S(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}function I(e,r){return P.apply(this,arguments)}function P(){return(P=(0,s.Z)(n().mark((function e(r,t){var a,s,l,i,c,o,d,u,m,h,p,f;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=N().decode(t),s=a.facultyId,e.prev=2,!t){e.next=37;break}e.prev=4,l=[],i=k(r.entries());try{for(i.s();!(c=i.n()).done;)"PublicationAuthorDPSM[]"==(o=c.value)[0]&&o[1]!=s&&l.push(o[1])}catch(n){i.e(n)}finally{i.f()}return d=r.get("proof"),e.next=11,y()({method:"POST",url:"https://api.dpsmqaportal.com/api/faculty/accomplishment/add/publication",data:r,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t)}});case 11:return u=e.sent,(m=new FormData).append("facultyId",s),m.append("publicationId",u.data.result.publicationId),m.append("proof",d),e.next=18,y()({method:"POST",url:"https://api.dpsmqaportal.com/api/faculty/accomplishment/add/publisher",data:m,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t)}});case 18:e.sent,m.delete("proof"),h=0,p=l;case 21:if(!(h<p.length)){e.next=30;break}return f=p[h],m.set("facultyId",f),e.next=26,y()({method:"POST",url:"https://api.dpsmqaportal.com/api/faculty/accomplishment/add/publisher",data:m,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t)}});case 26:e.sent;case 27:h++,e.next=21;break;case 30:return e.abrupt("return",u.data);case 33:return e.prev=33,e.t0=e.catch(4),console.error(e.t0),e.abrupt("return",e.t0);case 37:e.next=43;break;case 39:return e.prev=39,e.t1=e.catch(2),console.error(e.t1),e.abrupt("return",e.t1);case 43:case"end":return e.stop()}}),e,null,[[2,39],[4,33]])})))).apply(this,arguments)}function w(e){var r=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=(0,m.Z)(e);if(r){var n=(0,m.Z)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,u.Z)(this,t)}}var R=function(e){(0,d.Z)(t,e);var r=w(t);function t(e){return(0,c.Z)(this,t),r.call(this,e)}return(0,o.Z)(t,[{key:"render",value:function(){var e=this;return(0,l.jsx)(b.J9,{initialValues:{title:"",citation:"",url:"",publicationDate:"",nonFacultyAuthors:""},onSubmit:function(){var r=(0,s.Z)(n().mark((function r(t,a){var s,l,i,c,o;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=a.resetForm,l=document.getElementById("pubForm"),i=new FormData(l),c=document.getElementById("publicationalert"),r.next=6,I(i,e.props.token);case 6:1==(o=r.sent).success?(c.className="alert alert-success",c.style="visibility: visible",c.innerHTML=o.message):(c.className="alert alert-danger",o.error?t.message=o.error[0].message:t.message=o.message),$("#publicationalert").fadeTo(5e3,500).slideUp(500,(function(){$("#publicationalert").slideUp(500)})),s(),j.default.push("/faculty/accomplishment");case 11:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}(),children:function(r){r.values,r.errors,r.touched;var t=r.isSubmitting;return(0,l.jsxs)(b.l0,{id:"pubForm",children:[(0,l.jsx)("hr",{}),(0,l.jsx)("br",{}),(0,l.jsxs)("div",{className:"form-row",children:[(0,l.jsxs)("div",{className:"form-group col-md-6",children:[(0,l.jsx)("label",{htmlFor:"Publication[]",children:" Publication "}),(0,l.jsx)(b.gN,{className:"form-control",type:"text",name:"title",placeholder:"Input publication name/title"})]}),(0,l.jsxs)("div",{className:"form-group col-md-6",children:[(0,l.jsx)("label",{htmlFor:"PublicationCitation[]",children:" Citation "}),(0,l.jsx)(b.gN,{className:"form-control",type:"text",name:"citation",placeholder:"Input full citation for publication"})]})]}),(0,l.jsxs)("div",{className:"form-row",children:[(0,l.jsxs)("div",{className:"form-group col-md-3",children:[(0,l.jsx)("label",{htmlFor:"PublicationURL[]",children:" URL "}),(0,l.jsx)(b.gN,{className:"form-control",type:"text",name:"url",placeholder:"Input publication URL"})]}),(0,l.jsxs)("div",{className:"form-group col-md-3",children:[(0,l.jsx)("label",{htmlFor:"PublishDate[]",children:" Date Published "}),(0,l.jsx)(b.gN,{type:"date",className:"form-control",name:"publicationDate"})]}),(0,l.jsxs)("div",{className:"form-group col-md-3",children:[(0,l.jsx)("label",{htmlFor:"PublicationProof[]",children:" Proof "}),(0,l.jsx)(b.gN,{type:"file",className:"form-control-file",name:"proof",id:"proof"})]})]}),(0,l.jsx)("div",{className:"form-row",children:(0,l.jsxs)("div",{className:"form-group col-md-12",children:[(0,l.jsx)("label",{htmlFor:"PublicationAuthorNonDPSM[]",children:" Authors (non-DPSM) "}),(0,l.jsx)(b.gN,{className:"form-control",type:"text",name:"nonFacultyAuthors",placeholder:"Input all authors outside DPSM (separate names with commas)"})]})}),(0,l.jsx)("div",{children:(0,l.jsx)(x,{faculty:e.props.faculty})}),(0,l.jsx)("br",{}),(0,l.jsx)("button",{type:"submit",className:"btn btn-primary col-md-12",disabled:t,children:"Submit"})]})}})}}]),t}(h.Component),D=t(61588),F=t(72939);function T(e,r){return L.apply(this,arguments)}function L(){return(L=(0,s.Z)(n().mark((function e(r,t){var a,s,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=N().decode(t),s=a.facultyId,e.prev=2,!t){e.next=15;break}return e.prev=4,e.next=7,y().delete("https://api.dpsmqaportal.com/api/faculty/accomplishment/"+s+"/publisher",{headers:{Authorization:"Bearer ".concat(t)},data:{publicationId:"".concat(r)}});case 7:return l=e.sent,e.abrupt("return",l.data);case 11:return e.prev=11,e.t0=e.catch(4),console.error(e.t0),e.abrupt("return",e.t0);case 15:e.next=21;break;case 17:return e.prev=17,e.t1=e.catch(2),console.error(e.t1),e.abrupt("return",e.t1);case 21:case"end":return e.stop()}}),e,null,[[2,17],[4,11]])})))).apply(this,arguments)}function A(e,r){return C.apply(this,arguments)}function C(){return(C=(0,s.Z)(n().mark((function e(r,t){var a,s,l,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=N().decode(t),s=a.facultyId,e.prev=2,!t){e.next=14;break}return l="https://api.dpsmqaportal.com/api/faculty/accomplishment/"+s,{headers:{Authorization:"Bearer "+t}},""==r.get("proof")&&r.delete("proof"),e.next=9,y()({method:"PUT",url:l+"/publication",data:r,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t)}});case 9:return i=e.sent,console.log(i.data),e.abrupt("return",i.data);case 14:console.log(access.result.message);case 15:e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",e.t0);case 21:case"end":return e.stop()}}),e,null,[[2,17]])})))).apply(this,arguments)}function E(e,r,t,a){return Z.apply(this,arguments)}function Z(){return(Z=(0,s.Z)(n().mark((function e(r,t,a,s){var l,i,c,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=N().decode(s),t?2==l.role?i="Verified":3==l.role&&(i="Approved"):(i="Rejected",r.set("approverRemarks",l.name+": "+r.get("approverRemarks"))),r.append("status",i),e.prev=3,!s){e.next=17;break}return e.prev=5,c="https://api.dpsmqaportal.com/api/faculty/accomplishment/"+a,e.next=9,y()({method:"PUT",url:c+"/publisher",data:r,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(s)}});case 9:return o=e.sent,e.abrupt("return",o.data);case 13:return e.prev=13,e.t0=e.catch(5),console.error(e.t0),e.abrupt("return",e.t0);case 17:e.next=23;break;case 19:return e.prev=19,e.t1=e.catch(3),console.error(e.t1),e.abrupt("return",e.t1);case 23:case"end":return e.stop()}}),e,null,[[3,19],[5,13]])})))).apply(this,arguments)}var U=function(e){var r,t=0,a=0,c=h.useState({publicationId:0,title:"",publicationDate:"",citation:"",url:"",nonFacultyAuthors:""}),o=(0,i.Z)(c,2),d=o[0],u=o[1];function m(e){a=e}return r=null!=e.children?Object.keys(e.children).map((function(r){var a=e.children[r].faculty_publishers,n=[];return a.forEach((function(e){var r="/faculty/view/"+e.facultyId;n.push((0,l.jsx)("a",{href:r,children:e.faculty_personal_info.firstName+" "+e.faculty_personal_info.lastName+", "}))})),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:e.children[r].title}),(0,l.jsxs)("td",{children:[n,e.children[r].nonFacultyAuthors]}),(0,l.jsx)("td",{children:e.children[r].publicationDate}),(0,l.jsx)("td",{children:e.children[r].url}),(0,l.jsx)("td",{children:e.children[r].citation}),(0,l.jsx)("td",{children:Object.keys(a).map((function(r){if(a[r].facultyId==e.facultyId)return a[r].proof?(0,l.jsxs)("div",{className:"btn-grp",children:[(0,l.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){var t=a[r].proof;(0,F.Z)(t,e.token)},children:"Download"}),(0,l.jsx)("a",{className:"btn btn-info",href:"https://api.dpsmqaportal.com/"+a[r].proof,style:{color:"white"},target:"_blank",children:"Preview"})]}):(0,l.jsx)("div",{children:"None"})}))}),(0,l.jsx)("td",{children:Object.keys(a).map((function(r){if(a[r].facultyId==e.facultyId)return a[r].status}))}),(0,l.jsx)("td",{children:Object.keys(a).map((function(r){if(a[r].facultyId==e.facultyId)return a[r].approverRemarks||"None"}))}),(0,l.jsxs)("td",{children:[e.facultyFlag&&!e.viewFlag&&(0,l.jsxs)("div",{className:"btn-group",children:[(0,l.jsx)("a",{className:"btn btn-info","data-toggle":"modal","data-target":"#editPublication",onClick:function(){var t,a;t=e.children[r].publicationId,a=t,Object.keys(e.children).map((function(r){e.children[r].publicationId==a&&u(e.children[r])}))},children:"Edit"}),(0,l.jsx)("a",{className:"btn btn-danger","data-toggle":"modal","data-target":"#deletePublication",onClick:function(){var a;a=e.children[r].publicationId,t=a},children:"Delete"})]}),!e.facultyFlag&&!e.viewFlag&&(0,l.jsxs)("div",{className:"btn-grp",children:[(0,l.jsx)("a",{className:"btn btn-info","data-toggle":"modal","data-target":"#approvePublication",onClick:function(){m(e.children[r].publicationId)},children:"Approve"}),(0,l.jsx)("a",{className:"btn btn-danger","data-toggle":"modal","data-target":"#rejectPublication",onClick:function(){m(e.children[r].publicationId)},children:"Reject"})]})]})]},e.children[r].publicationId)})):(0,l.jsx)("td",{colSpan:"7",children:(0,l.jsx)("p",{align:"center",children:"No data available!"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{align:"center",children:" Publications "}),(0,l.jsx)(D.Z,{unit:e.unit,position:e.position,children:e.name}),(0,l.jsx)("div",{className:"alert alert-success",role:"alert",id:"publicationalert",style:{visibility:"hidden"}}),(0,l.jsx)("div",{className:"table-responsive",children:(0,l.jsx)("table",{className:"table table-striped table-sm",children:(0,l.jsxs)("tbody",{children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Publication"}),(0,l.jsx)("th",{children:"Author/s"}),(0,l.jsx)("th",{children:"Publication Date"}),(0,l.jsx)("th",{children:"URL"}),(0,l.jsx)("th",{children:"Citation"}),(0,l.jsx)("th",{children:"Proof"}),(0,l.jsx)("th",{children:"Status"}),(0,l.jsx)("th",{children:"Approver Remarks"}),!e.viewFlag&&(0,l.jsx)("th",{children:"Action"})]}),r]})})}),e.facultyFlag&&(0,l.jsx)("div",{children:(0,l.jsx)(R,{faculty:e.faculty,token:e.token})}),(0,l.jsx)("div",{className:"modal fade",id:"editPublication",tabIndex:"-1",role:"dialog","aria-labelledby":"editPublicationLabel","aria-hidden":"true",children:(0,l.jsx)("div",{className:"modal-dialog",role:"document",children:(0,l.jsxs)("div",{className:"modal-content",children:[(0,l.jsxs)("div",{className:"modal-header",children:[(0,l.jsx)("h5",{className:"modal-title",id:"editPublicationLabel",children:"Update Publication Information"}),(0,l.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,l.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,l.jsx)(b.J9,{enableReinitialize:!0,initialValues:d,onSubmit:function(){var r=(0,s.Z)(n().mark((function r(t){var a,s,l,i;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=document.getElementById("editPubForm"),(s=new FormData(a)).append("publicationId",d.publicationId),l=document.getElementById("publicationalert"),r.next=6,A(s,e.token);case 6:1==(i=r.sent).success?(l.className="alert alert-success",l.style="visibility: visible",l.innerHTML=i.message):(l.className="alert alert-danger",i.error?l.innerHTML=i.error[0].message:l.innerHTML=i.message),$("#publicationalert").fadeTo(5e3,500).slideUp(500,(function(){$("#publicationalert").slideUp(500)})),j.default.push("/faculty/accomplishment");case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),children:function(e){e.values,e.errors,e.touched;var r=e.isSubmitting;return(0,l.jsxs)(b.l0,{id:"editPubForm",children:[(0,l.jsxs)("div",{className:"modal-body",children:[(0,l.jsx)("hr",{}),(0,l.jsx)("div",{className:"form-row",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"PublicationUpdate",children:" Publication "}),(0,l.jsx)(b.gN,{className:"form-control",type:"text",name:"title",placeholder:"Input publication name/title"})]})}),(0,l.jsx)("div",{className:"form-row",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"PublicationCitationUpdate",children:" Citation "}),(0,l.jsx)(b.gN,{className:"form-control",type:"text",name:"citation",placeholder:"Input full citation for publication"})]})}),(0,l.jsx)("div",{className:"form-row",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"PublicationURLUpdate",children:" URL "}),(0,l.jsx)(b.gN,{className:"form-control",type:"text",name:"url",placeholder:"Input publication URL"})]})}),(0,l.jsx)("div",{className:"form-row",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"PublishDateUpdate",children:" Date Published "}),(0,l.jsx)(b.gN,{type:"date",className:"form-control",name:"publicationDate"})]})}),(0,l.jsx)("div",{className:"form-row",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"PublicationAuthorNonDPSMUpdate",children:" Authors (non-DPSM) "}),(0,l.jsx)(b.gN,{className:"form-control",type:"text",name:"nonFacultyAuthors",placeholder:"Input all authors outside DPSM (separate names with commas)"})]})}),(0,l.jsx)("div",{className:"form-row",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"PublicationProofUpdate",children:" Proof "}),(0,l.jsx)(b.gN,{type:"file",className:"form-control-file",name:"proof",value:void 0})]})})]}),(0,l.jsxs)("div",{className:"modal-footer",children:[(0,l.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"Close"}),(0,l.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:r,onClick:function(){$("#editPublication").modal("toggle")},children:"Save changes"})]})]})}})]})})}),(0,l.jsx)("div",{className:"modal fade",id:"deletePublication",tabIndex:"-1",role:"dialog","aria-labelledby":"deletePublicationLabel","aria-hidden":"true",children:(0,l.jsx)("div",{className:"modal-dialog",role:"document",children:(0,l.jsxs)("div",{className:"modal-content",children:[(0,l.jsxs)("div",{className:"modal-header",children:[(0,l.jsx)("h5",{className:"modal-title",id:"deletePublicationLabel",children:"Delete Publication Information"}),(0,l.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,l.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,l.jsxs)("div",{className:"modal-body",children:[(0,l.jsx)("hr",{}),(0,l.jsx)("p",{children:" Are you sure you want to delete this publication information? "})]}),(0,l.jsxs)("div",{className:"modal-footer",children:[(0,l.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"No, don't delete"}),(0,l.jsx)("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:(0,s.Z)(n().mark((function r(){var a,s;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=document.getElementById("publicationalert"),r.next=3,T(t,e.token);case 3:1==(s=r.sent).success?(a.className="alert alert-success",a.style="visibility: visible",a.innerHTML=s.message):(a.className="alert alert-danger",s.error?a.innerHTML=s.error[0].message:a.innerHTML=s.message),$("#publicationalert").fadeTo(5e3,500).slideUp(500,(function(){$("#publicationalert").slideUp(500)})),j.default.push("/faculty/accomplishment");case 7:case"end":return r.stop()}}),r)}))),children:"Yes, delete"})]})]})})}),(0,l.jsx)("div",{className:"modal fade",id:"approvePublication",tabIndex:"-1",role:"dialog","aria-labelledby":"approvePublicationLabel","aria-hidden":"true",children:(0,l.jsx)("div",{className:"modal-dialog",role:"document",children:(0,l.jsxs)("div",{className:"modal-content",children:[(0,l.jsxs)("div",{className:"modal-header",children:[(0,l.jsx)("h5",{className:"modal-title",id:"approvePublicationLabel",children:"Approve Publication Information"}),(0,l.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,l.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,l.jsxs)("div",{className:"modal-body",children:[(0,l.jsx)("hr",{}),(0,l.jsx)("p",{children:" Are you sure you want to approve this publication information? "})]}),(0,l.jsxs)("div",{className:"modal-footer",children:[(0,l.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"No, don't approve"}),(0,l.jsx)("button",{type:"button",className:"btn btn-danger",onClick:(0,s.Z)(n().mark((function r(){var t,s,l;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=document.getElementById("publicationalert"),$("#approvePublication").modal("toggle"),(s=new FormData).append("publicationId",a),r.next=6,E(s,!0,e.facultyId,e.token);case 6:1==(l=r.sent).success?(t.className="alert alert-success",t.style="visibility: visible",t.innerHTML=l.message):(t.className="alert alert-danger",t.style="visibility: visible",l.error?t.innerHTML=l.error[0].message:t.innerHTML=l.message),$("#publicationalert").fadeTo(5e3,500).slideUp(500,(function(){$("#publicationalert").slideUp(500)})),j.default.push("/faculty/approval/"+e.facultyId,"/faculty/approval/"+e.facultyId);case 10:case"end":return r.stop()}}),r)}))),children:"Yes, approve"})]})]})})}),(0,l.jsx)("div",{className:"modal fade",id:"rejectPublication",tabIndex:"-1",role:"dialog","aria-labelledby":"rejectPublicationLabel","aria-hidden":"true",children:(0,l.jsx)("div",{className:"modal-dialog",role:"document",children:(0,l.jsxs)("div",{className:"modal-content",children:[(0,l.jsxs)("div",{className:"modal-header",children:[(0,l.jsx)("h5",{className:"modal-title",id:"rejectPublicationLabel",children:"Reject Publication Information"}),(0,l.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,l.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,l.jsx)(b.J9,{enableReinitialize:!0,initialValues:d,onSubmit:function(){var r=(0,s.Z)(n().mark((function r(t){var s,l,i,c;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=document.getElementById("publicationalert"),$("#rejectPublication").modal("toggle"),l=document.getElementById("rejectPubForm"),(i=new FormData(l)).append("publicationId",a),r.next=7,E(i,!1,e.facultyId,e.token);case 7:1==(c=r.sent).success?(s.className="alert alert-success",s.style="visibility: visible",s.innerHTML=c.message):(s.className="alert alert-danger",s.style="visibility: visible",c.error?s.innerHTML=c.error[0].message:s.innerHTML=c.message),$("#publicationalert").fadeTo(5e3,500).slideUp(500,(function(){$("#publicationalert").slideUp(500)})),j.default.push("/faculty/approval/"+e.facultyId,"/faculty/approval/"+e.facultyId);case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),children:function(e){e.values,e.errors,e.touched;var r=e.isSubmitting;return(0,l.jsxs)(b.l0,{id:"rejectPubForm",children:[(0,l.jsxs)("div",{className:"modal-body",children:[(0,l.jsx)("hr",{}),(0,l.jsx)("div",{className:"form-row",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"RejectionRemarks",children:" Reason/Remarks for Rejection "}),(0,l.jsx)(b.gN,{className:"form-control",type:"text",name:"approverRemarks",placeholder:"Input remarks",required:!0})]})})]}),(0,l.jsxs)("div",{className:"modal-footer",children:[(0,l.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"Close"}),(0,l.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:r,onClick:function(){$("#rejectPublication").modal("toggle")},children:"Save changes"})]})]})}})]})})})]})}},19535:function(e,r,t){"use strict";t.d(r,{Z:function(){return U}});var a=t(809),n=t.n(a),s=t(92447),l=t(85893),i=t(64121),c=(t(41664),t(74047)),o=t(52700),d=t(8127),u=t(58580),m=t(20775),h=t(67294),p=t(89609);function f(e){var r=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=(0,m.Z)(e);if(r){var n=(0,m.Z)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,u.Z)(this,t)}}var x=function(e){(0,d.Z)(t,e);var r=f(t);function t(e){var a;return(0,c.Z)(this,t),(a=r.call(this,e)).state={duplicateAuthors:[]},a}return(0,o.Z)(t,[{key:"clone",value:function(){var e=this,r=Object.keys(this.props.faculty).map((function(r){return(0,l.jsx)("option",{value:e.props.faculty[r].facultyId,children:e.props.faculty[r].lastName+", "+e.props.faculty[r].firstName})}));this.state.duplicateAuthors.push((0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"form-row",children:(0,l.jsxs)("div",{className:"form-group col-md-6",children:[(0,l.jsx)("label",{htmlFor:"ResearchAuthorDPSM[]",children:" Researcher (from DPSM) "}),(0,l.jsx)("select",{className:"form-control col-md-6",name:"ResearchAuthorDPSM[]",required:!0,children:r})]})})})),this.setState({})}},{key:"remove",value:function(){this.state.duplicateAuthors.pop(),this.setState({})}},{key:"render",value:function(){var e=this,r=Object.keys(this.props.faculty).map((function(r){return(0,l.jsx)("option",{value:e.props.faculty[r].facultyId,children:e.props.faculty[r].lastName+", "+e.props.faculty[r].firstName})}));return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"form-row",children:(0,l.jsxs)("div",{className:"form-group col-md-6",children:[(0,l.jsx)("label",{htmlFor:"ResearchAuthorDPSM[]",children:" Researchers (from DPSM) "}),(0,l.jsx)(p.ZP,{className:"col-md-12",name:"ResearchAuthorDPSM[]",isMulti:!0,options:r,required:!0})]})}),(0,l.jsx)("div",{children:this.state.duplicateAuthors})]})}}]),t}(h.Component),b=t(17513),j=t(11163),v=t(9669),y=t.n(v),g=t(49704),N=t.n(g);function k(e,r){var t;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"===typeof e)return S(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return S(e,r)}(e))||r&&e&&"number"===typeof e.length){t&&(e=t);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,l=!0,i=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return l=e.done,e},e:function(e){i=!0,s=e},f:function(){try{l||null==t.return||t.return()}finally{if(i)throw s}}}}function S(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}function I(e,r){return P.apply(this,arguments)}function P(){return(P=(0,s.Z)(n().mark((function e(r,t){var a,s,l,i,c,o,d,u,m,h,p,f;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=N().decode(t),s=a.facultyId,e.prev=2,!t){e.next=37;break}e.prev=4,l=[],i=k(r.entries());try{for(i.s();!(c=i.n()).done;)"ResearchAuthorDPSM[]"==(o=c.value)[0]&&o[1]!=s&&l.push(o[1])}catch(n){i.e(n)}finally{i.f()}return d=r.get("proof"),e.next=11,y()({method:"POST",url:"https://api.dpsmqaportal.com/api/faculty/accomplishment/add/research-grant",data:r,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t)}});case 11:return u=e.sent,(m=new FormData).append("facultyId",s),m.append("researchId",u.data.result.researchId),m.append("proof",d),e.next=18,y()({method:"POST",url:"https://api.dpsmqaportal.com/api/faculty/accomplishment/add/researcher",data:m,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t)}});case 18:e.sent,m.delete("proof"),h=0,p=l;case 21:if(!(h<p.length)){e.next=30;break}return f=p[h],m.set("facultyId",f),e.next=26,y()({method:"POST",url:"https://api.dpsmqaportal.com/api/faculty/accomplishment/add/researcher",data:m,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t)}});case 26:e.sent;case 27:h++,e.next=21;break;case 30:return e.abrupt("return",u.data);case 33:return e.prev=33,e.t0=e.catch(4),console.error(e.t0),e.abrupt("return",e.t0);case 37:e.next=43;break;case 39:return e.prev=39,e.t1=e.catch(2),console.error(e.t1),e.abrupt("return",e.t1);case 43:case"end":return e.stop()}}),e,null,[[2,39],[4,33]])})))).apply(this,arguments)}function w(e){var r=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=(0,m.Z)(e);if(r){var n=(0,m.Z)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,u.Z)(this,t)}}var R=function(e){(0,d.Z)(t,e);var r=w(t);function t(e){return(0,c.Z)(this,t),r.call(this,e)}return(0,o.Z)(t,[{key:"render",value:function(){var e=this;return(0,l.jsx)(b.J9,{initialValues:{researchName:"",granter:"",amount:"",projectedStart:"",projectedEnd:"",actualStart:"",actualEnd:"",researchProgress:"",nonFacultyResearchers:""},onSubmit:function(){var r=(0,s.Z)(n().mark((function r(t,a){var s,l,i,c,o;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=a.resetForm,l=document.getElementById("resForm"),i=new FormData(l),c=document.getElementById("researchalert"),r.next=6,I(i,e.props.token);case 6:1==(o=r.sent).success?(c.className="alert alert-success",c.style="visibility: visible",c.innerHTML=o.message):(c.className="alert alert-danger",o.error?t.message=o.error[0].message:t.message=o.message),$("#publicationalert").fadeTo(5e3,500).slideUp(500,(function(){$("#publicationalert").slideUp(500)})),s(),j.default.push("/faculty/accomplishment");case 11:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}(),children:function(r){r.values,r.errors,r.touched;var t=r.isSubmitting;return(0,l.jsxs)(b.l0,{id:"resForm",children:[(0,l.jsx)("hr",{}),(0,l.jsx)("br",{}),(0,l.jsx)("div",{className:"form-row",children:(0,l.jsxs)("div",{className:"form-group col-md-12",children:[(0,l.jsx)("label",{htmlFor:"Research[]",children:" Research Project "}),(0,l.jsx)(b.gN,{className:"form-control",type:"text",name:"researchName",placeholder:"Input research name"})]})}),(0,l.jsx)("div",{className:"form-row",children:(0,l.jsxs)("div",{className:"form-group col-md-12",children:[(0,l.jsx)("label",{htmlFor:"ResearchSponsor[]",children:" Sponsor "}),(0,l.jsx)(b.gN,{className:"form-control",type:"text",name:"granter",placeholder:"Input sponsor"})]})}),(0,l.jsxs)("div",{className:"form-row",children:[(0,l.jsxs)("div",{className:"form-group col-md-6",children:[(0,l.jsx)("label",{htmlFor:"ResearchAmount[]",children:" Amount "}),(0,l.jsx)(b.gN,{className:"form-control",type:"text",name:"amount",placeholder:"Input amount"})]}),(0,l.jsxs)("div",{className:"form-group col-md-6",children:[(0,l.jsx)("label",{htmlFor:"ResearchProof[]",children:" Proof "}),(0,l.jsx)(b.gN,{type:"file",className:"form-control-file",name:"proof",id:"proof"})]})]}),(0,l.jsx)("div",{className:"form-row",children:(0,l.jsxs)("div",{className:"form-group col-md-12",children:[(0,l.jsx)("label",{htmlFor:"ResearchAuthorNonDPSM[]",children:" Researchers (non-DPSM) "}),(0,l.jsx)(b.gN,{className:"form-control",type:"text",name:"nonFacultyResearchers",placeholder:"Input all authors outside DPSM (separate names with commas)"})]})}),(0,l.jsx)("div",{children:(0,l.jsx)(x,{faculty:e.props.faculty})}),(0,l.jsxs)("div",{className:"form-row",children:[(0,l.jsxs)("div",{className:"form-group col-md-2",children:[(0,l.jsx)("label",{htmlFor:"ResearchProjectedStartDate[]",children:" Start Date (Projected) "}),(0,l.jsx)(b.gN,{type:"date",className:"form-control",name:"projectedStart"})]}),(0,l.jsxs)("div",{className:"form-group col-md-2",children:[(0,l.jsx)("label",{htmlFor:"ResearchProjectedEndDate[]",children:" End Date (Projected) "}),(0,l.jsx)(b.gN,{type:"date",className:"form-control",name:"projectedEnd"})]}),(0,l.jsxs)("div",{className:"form-group col-md-2",children:[(0,l.jsx)("label",{htmlFor:"ResearchStartDate[]",children:" Start Date (Actual) "}),(0,l.jsx)(b.gN,{type:"date",className:"form-control",name:"actualStart"})]}),(0,l.jsxs)("div",{className:"form-group col-md-2",children:[(0,l.jsx)("label",{htmlFor:"ResearchEndDate[]",children:" End Date (Actual) "}),(0,l.jsx)(b.gN,{type:"date",className:"form-control",name:"actualEnd"})]}),(0,l.jsxs)("div",{className:"form-group col-md-4",children:[(0,l.jsx)("label",{htmlFor:"ResearchProgress[]",children:" Research Progress "}),(0,l.jsxs)(b.gN,{as:"select",className:"form-control",name:"researchProgress",required:!0,children:[(0,l.jsx)("option",{value:"Ongoing",children:"Ongoing"}),(0,l.jsx)("option",{value:"Completed",children:"Completed"})]})]})]}),(0,l.jsx)("br",{}),(0,l.jsx)("button",{type:"submit",className:"btn btn-primary col-md-12",disabled:t,children:"Submit"})]})}})}}]),t}(h.Component),D=t(61588),F=t(72939);function T(e,r){return L.apply(this,arguments)}function L(){return(L=(0,s.Z)(n().mark((function e(r,t){var a,s,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=N().decode(t),s=a.facultyId,e.prev=2,!t){e.next=15;break}return e.prev=4,e.next=7,y().delete("https://api.dpsmqaportal.com/api/faculty/accomplishment/"+s+"/researcher",{headers:{Authorization:"Bearer ".concat(t)},data:{researchId:"".concat(r)}});case 7:return l=e.sent,e.abrupt("return",l.data);case 11:return e.prev=11,e.t0=e.catch(4),console.error(e.t0),e.abrupt("return",e.t0);case 15:e.next=21;break;case 17:return e.prev=17,e.t1=e.catch(2),console.error(e.t1),e.abrupt("return",e.t1);case 21:case"end":return e.stop()}}),e,null,[[2,17],[4,11]])})))).apply(this,arguments)}function A(e,r){return C.apply(this,arguments)}function C(){return(C=(0,s.Z)(n().mark((function e(r,t){var a,s,l,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=N().decode(t),s=a.facultyId,e.prev=2,!t){e.next=14;break}return l="https://api.dpsmqaportal.com/api/faculty/accomplishment/"+s,{headers:{Authorization:"Bearer "+t}},""==r.get("proof")&&r.delete("proof"),e.next=9,y()({method:"PUT",url:l+"/research-grant",data:r,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t)}});case 9:return i=e.sent,console.log(i.data),e.abrupt("return",i.data);case 14:console.log(access.result.message);case 15:e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",e.t0);case 21:case"end":return e.stop()}}),e,null,[[2,17]])})))).apply(this,arguments)}function E(e,r,t,a){return Z.apply(this,arguments)}function Z(){return(Z=(0,s.Z)(n().mark((function e(r,t,a,s){var l,i,c,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=N().decode(s),t?2==l.role?i="Verified":3==l.role&&(i="Approved"):(i="Rejected",r.set("approverRemarks",l.name+": "+r.get("approverRemarks"))),r.append("status",i),e.prev=3,!s){e.next=17;break}return e.prev=5,c="https://api.dpsmqaportal.com/api/faculty/accomplishment/"+a,e.next=9,y()({method:"PUT",url:c+"/researcher",data:r,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(s)}});case 9:return o=e.sent,e.abrupt("return",o.data);case 13:return e.prev=13,e.t0=e.catch(5),console.error(e.t0),e.abrupt("return",e.t0);case 17:e.next=23;break;case 19:return e.prev=19,e.t1=e.catch(3),console.error(e.t1),e.abrupt("return",e.t1);case 23:case"end":return e.stop()}}),e,null,[[3,19],[5,13]])})))).apply(this,arguments)}var U=function(e){var r,t=0,a=0,c=h.useState({researchId:0,researchName:"",granter:"",amount:"",projectedStart:"",projectedEnd:"",actualStart:"",actualEnd:"",researchProgress:"",nonFacultyResearchers:""}),o=(0,i.Z)(c,2),d=o[0],u=o[1];function m(e){a=e}return r=null!=e.children?Object.keys(e.children).map((function(r){var a=e.children[r].faculty_researchers,n=[];if(a.forEach((function(e){var r="/faculty/view/"+e.facultyId;n.push((0,l.jsx)("a",{href:r,children:e.faculty_personal_info.firstName+" "+e.faculty_personal_info.lastName+", "}))})),null!=e.children[r].researchId)return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:e.children[r].researchName}),(0,l.jsxs)("td",{children:[n,e.children[r].nonFacultyResearchers]}),(0,l.jsx)("td",{children:e.children[r].granter}),(0,l.jsx)("td",{children:e.children[r].amount}),(0,l.jsxs)("td",{children:[e.children[r].projectedStart," to ",e.children[r].projectedEnd]}),(0,l.jsx)("td",{children:e.children[r].actualStart}),(0,l.jsx)("td",{children:e.children[r].actualEnd}),(0,l.jsx)("td",{children:e.children[r].researchProgress}),(0,l.jsx)("td",{children:Object.keys(a).map((function(r){if(a[r].facultyId==e.facultyId)return a[r].proof?(0,l.jsxs)("div",{className:"btn-grp",children:[(0,l.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){var t=a[r].proof;(0,F.Z)(t,e.token)},children:"Download"}),(0,l.jsx)("a",{className:"btn btn-info",href:"https://api.dpsmqaportal.com/"+a[r].proof,style:{color:"white"},target:"_blank",children:"Preview"})]}):(0,l.jsx)("div",{children:"None"})}))}),(0,l.jsx)("td",{children:Object.keys(a).map((function(r){if(a[r].facultyId==e.facultyId)return a[r].status}))}),(0,l.jsx)("td",{children:Object.keys(a).map((function(r){if(a[r].facultyId==e.facultyId)return a[r].approverRemarks||"None"}))}),(0,l.jsxs)("td",{children:[e.facultyFlag&&!e.viewFlag&&(0,l.jsxs)("div",{className:"btn-group",children:[(0,l.jsx)("a",{className:"btn btn-info","data-toggle":"modal","data-target":"#editResearchGrant",onClick:function(){var t,a;t=e.children[r].researchId,a=t,Object.keys(e.children).map((function(r){e.children[r].researchId==a&&u(e.children[r])}))},children:"Edit"}),(0,l.jsx)("a",{className:"btn btn-danger","data-toggle":"modal","data-target":"#deleteResearchGrant",onClick:function(){var a;a=e.children[r].researchId,t=a},children:"Delete"})]}),!e.facultyFlag&&!e.viewFlag&&(0,l.jsxs)("div",{className:"btn-grp",children:[(0,l.jsx)("a",{className:"btn btn-info","data-toggle":"modal","data-target":"#approveResearchGrant",onClick:function(){m(e.children[r].researchId)},children:"Approve"}),(0,l.jsx)("a",{className:"btn btn-danger","data-toggle":"modal","data-target":"#rejectResearchGrant",onClick:function(){m(e.children[r].researchId)},children:"Reject"})]})]})]})})):(0,l.jsx)("td",{colSpan:"10",children:(0,l.jsx)("p",{align:"center",children:"No data available!"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{align:"center",children:" Research Grants "}),(0,l.jsx)(D.Z,{unit:e.unit,position:e.position,children:e.name}),(0,l.jsx)("div",{className:"alert alert-success",role:"alert",id:"researchalert",style:{visibility:"hidden"}}),(0,l.jsx)("div",{className:"table-responsive",children:(0,l.jsx)("table",{className:"table table-striped table-sm",children:(0,l.jsxs)("tbody",{children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Research Project"}),(0,l.jsx)("th",{children:"Researcher/s"}),(0,l.jsx)("th",{children:"Sponsor"}),(0,l.jsx)("th",{children:"Amount"}),(0,l.jsx)("th",{children:"Projected Duration"}),(0,l.jsx)("th",{children:"Start Date"}),(0,l.jsx)("th",{children:"End Date"}),(0,l.jsx)("th",{children:"Research Progress"}),(0,l.jsx)("th",{children:"Proof"}),(0,l.jsx)("th",{children:"Status"}),(0,l.jsx)("th",{children:"Approver Remarks"}),!e.viewFlag&&(0,l.jsx)("th",{children:"Action"})]}),r]})})}),e.facultyFlag&&(0,l.jsx)("div",{children:(0,l.jsx)(R,{faculty:e.faculty,token:e.token})}),(0,l.jsx)("div",{className:"modal fade",id:"editResearchGrant",tabIndex:"-1",role:"dialog","aria-labelledby":"editResearchGrantLabel","aria-hidden":"true",children:(0,l.jsx)("div",{className:"modal-dialog",role:"document",children:(0,l.jsxs)("div",{className:"modal-content",children:[(0,l.jsxs)("div",{className:"modal-header",children:[(0,l.jsx)("h5",{className:"modal-title",id:"editResearchGrantLabel",children:"Update Research Grant Information"}),(0,l.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,l.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,l.jsx)(b.J9,{enableReinitialize:!0,initialValues:d,onSubmit:function(){var r=(0,s.Z)(n().mark((function r(t){var a,s,l,i;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=document.getElementById("editResForm"),(s=new FormData(a)).append("researchId",d.researchId),l=document.getElementById("researchalert"),r.next=6,A(s,e.token);case 6:1==(i=r.sent).success?(l.className="alert alert-success",l.style="visibility: visible",l.innerHTML=i.message):(l.className="alert alert-danger",i.error?l.innerHTML=i.error[0].message:l.innerHTML=i.message),$("#researchalert").fadeTo(5e3,500).slideUp(500,(function(){$("#researchalert").slideUp(500)})),j.default.push("/faculty/accomplishment");case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),children:function(e){e.values,e.errors,e.touched;var r=e.isSubmitting;return(0,l.jsxs)(b.l0,{id:"editResForm",children:[(0,l.jsxs)("div",{className:"modal-body",children:[(0,l.jsx)("hr",{}),(0,l.jsx)("div",{className:"form-row",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"ResearchUpdate",children:" Research Project "}),(0,l.jsx)(b.gN,{className:"form-control",type:"text",name:"researchName",placeholder:"Input research name"})]})}),(0,l.jsx)("div",{className:"form-row",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"ResearchSponsorUpdate",children:" Sponsor "}),(0,l.jsx)(b.gN,{className:"form-control",type:"text",name:"granter",placeholder:"Input sponsor"})]})}),(0,l.jsx)("div",{className:"form-row",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"ResearchAmountUpdate",children:" Amount "}),(0,l.jsx)(b.gN,{className:"form-control",type:"text",name:"amount",placeholder:"Input amount"})]})}),(0,l.jsx)("div",{className:"form-row",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"ResearchStartDateUpdate",children:" Start Date (Actual) "}),(0,l.jsx)(b.gN,{type:"date",className:"form-control",name:"actualStart"})]})}),(0,l.jsx)("div",{className:"form-row",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"ResearchEndDateUpdate",children:" End Date (Actual) "}),(0,l.jsx)(b.gN,{type:"date",className:"form-control",name:"actualEnd"})]})}),(0,l.jsx)("div",{className:"form-row",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"ResearchProjectedStartDateUpdate",children:" Start Date (Projected) "}),(0,l.jsx)(b.gN,{type:"date",className:"form-control",name:"projectedStart"})]})}),(0,l.jsx)("div",{className:"form-row",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"ResearchProjectedEndDateUpdate",children:" End Date (Projected) "}),(0,l.jsx)(b.gN,{type:"date",className:"form-control",name:"projectedEnd"})]})}),(0,l.jsx)("div",{className:"form-row",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"ResearchProgressUpdate",children:" Progress "}),(0,l.jsx)(b.gN,{className:"form-control",type:"text",name:"researchProgress",placeholder:"Input progress"})]})}),(0,l.jsx)("div",{className:"form-row",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"ResearchAuthorNonDPSMUpdate",children:" Authors (non-DPSM) "}),(0,l.jsx)(b.gN,{className:"form-control",type:"text",name:"nonFacultyResearchers",placeholder:"Input all authors outside DPSM (separate names with commas)"})]})}),(0,l.jsx)("div",{className:"form-row",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"ResearchAuthorDPSMUpdate",children:" Authors (DPSM) "}),(0,l.jsx)("input",{className:"form-control",type:"text",name:"ResearchAuthorDPSMUpdate",placeholder:"Input author (must be from DPSM)"})]})}),(0,l.jsx)("div",{className:"form-row",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"ResearchProofUpdate",children:" Proof "}),(0,l.jsx)(b.gN,{type:"file",className:"form-control-file",name:"proof",value:void 0})]})})]}),(0,l.jsxs)("div",{className:"modal-footer",children:[(0,l.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"Close"}),(0,l.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:r,onClick:function(){$("#editResearchGrant").modal("toggle")},children:"Save changes"})]})]})}})]})})}),(0,l.jsx)("div",{className:"modal fade",id:"deleteResearchGrant",tabIndex:"-1",role:"dialog","aria-labelledby":"deleteResearchGrantLabel","aria-hidden":"true",children:(0,l.jsx)("div",{className:"modal-dialog",role:"document",children:(0,l.jsxs)("div",{className:"modal-content",children:[(0,l.jsxs)("div",{className:"modal-header",children:[(0,l.jsx)("h5",{className:"modal-title",id:"deleteResearchGrantLabel",children:"Delete Research Grant Information"}),(0,l.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,l.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,l.jsxs)("div",{className:"modal-body",children:[(0,l.jsx)("hr",{}),(0,l.jsx)("p",{children:" Are you sure you want to delete this research grant information? "})]}),(0,l.jsxs)("div",{className:"modal-footer",children:[(0,l.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"No, don't delete"}),(0,l.jsx)("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:(0,s.Z)(n().mark((function r(){var a,s;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=document.getElementById("researchalert"),r.next=3,T(t,e.token);case 3:1==(s=r.sent).success?(a.className="alert alert-success",a.style="visibility: visible",a.innerHTML=s.message):(a.className="alert alert-danger",s.error?values.message=s.error[0].message:values.message=s.message),$("#researchalert").fadeTo(5e3,500).slideUp(500,(function(){$("#researchalert").slideUp(500)})),j.default.push("/faculty/accomplishment");case 7:case"end":return r.stop()}}),r)}))),children:"Yes, delete"})]})]})})}),(0,l.jsx)("div",{className:"modal fade",id:"approveResearchGrant",tabIndex:"-1",role:"dialog","aria-labelledby":"approveResearchGrantLabel","aria-hidden":"true",children:(0,l.jsx)("div",{className:"modal-dialog",role:"document",children:(0,l.jsxs)("div",{className:"modal-content",children:[(0,l.jsxs)("div",{className:"modal-header",children:[(0,l.jsx)("h5",{className:"modal-title",id:"approveResearchGrantLabel",children:"Approve Research Grant Information"}),(0,l.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,l.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,l.jsxs)("div",{className:"modal-body",children:[(0,l.jsx)("hr",{}),(0,l.jsx)("p",{children:" Are you sure you want to approve this research grant information? "})]}),(0,l.jsxs)("div",{className:"modal-footer",children:[(0,l.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"No, don't approve"}),(0,l.jsx)("button",{type:"button",className:"btn btn-danger",onClick:(0,s.Z)(n().mark((function r(){var t,s,l;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=document.getElementById("researchalert"),$("#approveResearchGrant").modal("toggle"),(s=new FormData).append("researchId",a),r.next=6,E(s,!0,e.facultyId,e.token);case 6:1==(l=r.sent).success?(t.className="alert alert-success",t.style="visibility: visible",t.innerHTML=l.message):(t.className="alert alert-danger",t.style="visibility: visible",l.error?t.innerHTML=l.error[0].message:t.innerHTML=l.message),$("#researchalert").fadeTo(5e3,500).slideUp(500,(function(){$("#researchalert").slideUp(500)})),j.default.push("/faculty/approval/"+e.facultyId,"/faculty/approval/"+e.facultyId);case 10:case"end":return r.stop()}}),r)}))),children:"Yes, approve"})]})]})})}),(0,l.jsx)("div",{className:"modal fade",id:"rejectResearchGrant",tabIndex:"-1",role:"dialog","aria-labelledby":"rejectResearchGrantLabel","aria-hidden":"true",children:(0,l.jsx)("div",{className:"modal-dialog",role:"document",children:(0,l.jsxs)("div",{className:"modal-content",children:[(0,l.jsxs)("div",{className:"modal-header",children:[(0,l.jsx)("h5",{className:"modal-title",id:"rejectResearchGrantLabel",children:"Reject Research Grant Information"}),(0,l.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,l.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,l.jsx)(b.J9,{enableReinitialize:!0,initialValues:d,onSubmit:function(){var r=(0,s.Z)(n().mark((function r(t){var s,l,i,c;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=document.getElementById("researchalert"),$("#rejectResearchGrant").modal("toggle"),l=document.getElementById("rejectRGForm"),(i=new FormData(l)).append("researchId",a),r.next=7,E(i,!1,e.facultyId,e.token);case 7:1==(c=r.sent).success?(s.className="alert alert-success",s.style="visibility: visible",s.innerHTML=c.message):(s.className="alert alert-danger",s.style="visibility: visible",c.error?s.innerHTML=c.error[0].message:s.innerHTML=c.message),$("#researchalert").fadeTo(5e3,500).slideUp(500,(function(){$("#researchalert").slideUp(500)})),j.default.push("/faculty/approval/"+e.facultyId,"/faculty/approval/"+e.facultyId);case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),children:function(e){e.values,e.errors,e.touched;var r=e.isSubmitting;return(0,l.jsxs)(b.l0,{id:"rejectRGForm",children:[(0,l.jsxs)("div",{className:"modal-body",children:[(0,l.jsx)("hr",{}),(0,l.jsx)("div",{className:"form-row",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"RejectionRemarks",children:" Reason/Remarks for Rejection "}),(0,l.jsx)(b.gN,{className:"form-control",type:"text",name:"approverRemarks",placeholder:"Input remarks",required:!0})]})})]}),(0,l.jsxs)("div",{className:"modal-footer",children:[(0,l.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"Close"}),(0,l.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:r,onClick:function(){$("#rejectResearchGrant").modal("toggle")},children:"Save changes"})]})]})}})]})})})]})}},3851:function(e,r,t){"use strict";t.d(r,{Z:function(){return E}});var a=t(809),n=t.n(a),s=t(92447),l=t(26265),i=t(85893),c=t(64121),o=(t(41664),t(74047)),d=t(52700),u=t(8127),m=t(58580),h=t(20775),p=t(67294),f=t(17513),x=t(11163),b=t(9669),j=t.n(b),v=t(49704),y=t.n(v);function g(e,r){return N.apply(this,arguments)}function N(){return(N=(0,s.Z)(n().mark((function e(r,t){var a,s,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=y().decode(t),s=a.facultyId,e.prev=2,!t){e.next=19;break}return e.prev=4,""==r.get("proof")&&r.delete("proof"),""==r.get("endDate")&&r.delete("endDate"),r.append("facultyId",s),r.append("status","Pending"),e.next=11,j()({method:"POST",url:"https://api.dpsmqaportal.com/api/faculty/accomplishment/add/training-seminar",data:r,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t)}});case 11:return l=e.sent,e.abrupt("return",l.data);case 15:return e.prev=15,e.t0=e.catch(4),console.error(e.t0),e.abrupt("return",e.t0);case 19:e.next=25;break;case 21:return e.prev=21,e.t1=e.catch(2),console.error(e.t1),e.abrupt("return",e.t1);case 25:case"end":return e.stop()}}),e,null,[[2,21],[4,15]])})))).apply(this,arguments)}function k(e){var r=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=(0,h.Z)(e);if(r){var n=(0,h.Z)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,m.Z)(this,t)}}var S=function(e){(0,u.Z)(t,e);var r=k(t);function t(e){return(0,o.Z)(this,t),r.call(this,e)}return(0,d.Z)(t,[{key:"render",value:function(){var e=this;return(0,i.jsx)(f.J9,{initialValues:{title:"",role:"",dateFrom:"",dateTo:"",venue:"",proof:""},onSubmit:function(){var r=(0,s.Z)(n().mark((function r(t,a){var s,l,i,c,o;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=a.resetForm,l=document.getElementById("tsForm"),i=new FormData(l),c=document.getElementById("trainingseminaralert"),r.next=6,g(i,e.props.token);case 6:1==(o=r.sent).success?(c.className="alert alert-success",c.style="visibility: visible",c.innerHTML=o.message):(c.className="alert alert-danger",o.error?c.innerHTML=o.error[0].message:c.innerHTML=o.message),$("#trainingseminaralert").fadeTo(5e3,500).slideUp(500,(function(){$("#trainingseminaralert").slideUp(500)})),s(),x.default.push("/faculty/accomplishment");case 11:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}(),children:function(e){e.values,e.errors,e.touched;var r=e.isSubmitting;return(0,i.jsxs)(f.l0,{id:"tsForm",children:[(0,i.jsx)("hr",{}),(0,i.jsx)("br",{}),(0,i.jsxs)("div",{className:"form-row",children:[(0,i.jsxs)("div",{className:"form-group col-md-3",children:[(0,i.jsx)("label",{htmlFor:"TrainingSeminar[]",children:" Name of Training/Seminar "}),(0,i.jsx)(f.gN,{className:"form-control",type:"text",name:"title",id:"title",placeholder:"Input training/seminar"})]}),(0,i.jsxs)("div",{className:"form-group col-md-3",children:[(0,i.jsx)("label",{htmlFor:"TrainingSeminarRole[]",children:" Role"}),(0,i.jsx)(f.gN,{className:"form-control",type:"text",name:"role",id:"role",placeholder:"Input training/seminar"})]}),(0,i.jsxs)("div",{className:"form-group col-md-2",children:[(0,i.jsx)("label",{htmlFor:"TrainingSeminarVenue[]",children:" Venue "}),(0,i.jsx)(f.gN,{className:"form-control",type:"text",name:"venue",id:"venue",placeholder:"Input venue"})]}),(0,i.jsxs)("div",{className:"form-group col-md-2",children:[(0,i.jsx)("label",{htmlFor:"TrainingSeminarStartDate[]",children:" Start Date "}),(0,i.jsx)(f.gN,{type:"date",className:"form-control",name:"dateFrom",id:"dateFrom"})]}),(0,i.jsxs)("div",{className:"form-group col-md-2",children:[(0,i.jsx)("label",{htmlFor:"TrainingSeminarEndDate[]",children:" End Date "}),(0,i.jsx)(f.gN,{type:"date",className:"form-control",name:"dateTo",id:"dateTo"})]}),(0,i.jsxs)("div",{className:"form-group col-md-8",children:[(0,i.jsx)("label",{htmlFor:"TrainingSeminarRemarks[]",children:" Remarks "}),(0,i.jsx)(f.gN,{className:"form-control",type:"text",name:"remarks",id:"remarks",placeholder:"Input remarks"})]}),(0,i.jsxs)("div",{className:"form-group col-md-4",children:[(0,i.jsx)("label",{htmlFor:"TrainingSeminarProof[]",children:" Proof "}),(0,i.jsx)(f.gN,{type:"file",className:"form-control-file",name:"proof",id:"proof"})]})]}),(0,i.jsx)("br",{}),(0,i.jsx)("button",{type:"submit",className:"btn btn-primary col-md-12",disabled:r,children:"Submit"})]})}})}}]),t}(p.Component),I=t(61588),P=t(72939);function w(e,r){return R.apply(this,arguments)}function R(){return(R=(0,s.Z)(n().mark((function e(r,t){var a,s,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=y().decode(t),s=a.facultyId,e.prev=2,!t){e.next=15;break}return e.prev=4,e.next=7,j().delete("https://api.dpsmqaportal.com/api/faculty/accomplishment/"+s+"/training-seminar",{headers:{Authorization:"Bearer ".concat(t)},data:{tsId:"".concat(r)}});case 7:return l=e.sent,e.abrupt("return",l.data);case 11:return e.prev=11,e.t0=e.catch(4),console.error(e.t0),e.abrupt("return",e.t0);case 15:e.next=21;break;case 17:return e.prev=17,e.t1=e.catch(2),console.error(e.t1),e.abrupt("return",e.t1);case 21:case"end":return e.stop()}}),e,null,[[2,17],[4,11]])})))).apply(this,arguments)}function D(e,r){return F.apply(this,arguments)}function F(){return(F=(0,s.Z)(n().mark((function e(r,t){var a,s,l,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=y().decode(t),s=a.facultyId,e.prev=2,!t){e.next=13;break}return l="https://api.dpsmqaportal.com/api/faculty/accomplishment/"+s,{headers:{Authorization:"Bearer "+t}},""==r.get("proof")&&r.delete("proof"),e.next=9,j()({method:"PUT",url:l+"/training-seminar",data:r,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t)}});case 9:return i=e.sent,e.abrupt("return",i.data);case 13:console.log(access.result.message);case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",e.t0);case 20:case"end":return e.stop()}}),e,null,[[2,16]])})))).apply(this,arguments)}function T(e,r,t,a){return L.apply(this,arguments)}function L(){return(L=(0,s.Z)(n().mark((function e(r,t,a,s){var l,i,c,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=y().decode(s),t?2==l.role?i="Verified":3==l.role&&(i="Approved"):(i="Rejected",r.set("approverRemarks",l.name+": "+r.get("approverRemarks"))),r.append("status",i),e.prev=3,!s){e.next=17;break}return e.prev=5,c="https://api.dpsmqaportal.com/api/faculty/accomplishment/"+a,e.next=9,j()({method:"PUT",url:c+"/training-seminar",data:r,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(s)}});case 9:return o=e.sent,e.abrupt("return",o.data);case 13:return e.prev=13,e.t0=e.catch(5),console.error(e.t0),e.abrupt("return",e.t0);case 17:e.next=23;break;case 19:return e.prev=19,e.t1=e.catch(3),console.error(e.t1),e.abrupt("return",e.t1);case 23:case"end":return e.stop()}}),e,null,[[3,19],[5,13]])})))).apply(this,arguments)}function A(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function C(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?A(Object(t),!0).forEach((function(r){(0,l.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var E=function(e){e.name;var r,t=0,a=0,l=p.useState({tsId:0,role:"",title:"",dateFrom:"",dateTo:"",venue:"",remarks:"",proof:""}),o=(0,c.Z)(l,2),d=o[0],u=o[1];function m(e){a=e}return r=null!=e.children?Object.keys(e.children).map((function(r){if(null!=e.children[r].tsId)return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:e.children[r].title}),(0,i.jsx)("td",{children:e.children[r].role}),(0,i.jsx)("td",{children:e.children[r].venue}),(0,i.jsx)("td",{children:e.children[r].dateFrom}),(0,i.jsx)("td",{children:e.children[r].dateTo}),(0,i.jsx)("td",{children:e.children[r].remarks}),(0,i.jsxs)("td",{children:[e.children[r].proof&&(0,i.jsxs)("div",{className:"btn-grp",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){var t=e.children[r].proof;(0,P.Z)(t,e.token)},children:"Download"}),(0,i.jsx)("a",{className:"btn btn-info",href:"https://api.dpsmqaportal.com/"+e.children[r].proof,style:{color:"white"},target:"_blank",children:"Preview"})]}),!e.children[r].proof&&(0,i.jsx)("div",{children:"None"})]}),(0,i.jsx)("td",{children:e.children[r].status}),(0,i.jsx)("td",{children:e.children[r].approverRemarks||"None"}),(0,i.jsxs)("td",{children:[e.facultyFlag&&!e.viewFlag&&(0,i.jsxs)("div",{className:"btn-group",children:[(0,i.jsx)("a",{className:"btn btn-info","data-toggle":"modal","data-target":"#editTrainingSeminar",onClick:function(){var t,a;t=e.children[r].tsId,a=t,Object.keys(e.children).map((function(r){e.children[r].tsId==a&&(u(e.children[r]),""!=e.children[r].endDate&&null!=e.children[r].endDate||u((function(e){return C(C({},e),{},{endDate:""})})))}))},children:"Edit"}),(0,i.jsx)("a",{className:"btn btn-danger","data-toggle":"modal","data-target":"#deleteTrainingSeminar",onClick:function(){var a;a=e.children[r].tsId,t=a},children:"Delete"})]}),!e.facultyFlag&&!e.viewFlag&&(0,i.jsxs)("div",{className:"btn-grp",children:[(0,i.jsx)("a",{className:"btn btn-info","data-toggle":"modal","data-target":"#approveTrainingSeminar",onClick:function(){m(e.children[r].tsId)},children:"Approve"}),(0,i.jsx)("a",{className:"btn btn-danger","data-toggle":"modal","data-target":"#rejectTrainingSeminar",onClick:function(){m(e.children[r].tsId)},children:"Reject"})]})]})]},e.children[r].tsId)})):(0,i.jsx)("td",{colSpan:"9",children:(0,i.jsx)("p",{align:"center",children:"No data available!"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{align:"center",children:" Training/Seminars "}),(0,i.jsx)(I.Z,{unit:e.unit,position:e.position,children:e.name}),(0,i.jsx)("div",{role:"alert",id:"trainingseminaralert",style:{visibility:"hidden"}}),(0,i.jsx)("div",{className:"table-responsive",children:(0,i.jsx)("table",{className:"table table-striped table-sm",children:(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Name of Training/Seminar"}),(0,i.jsx)("th",{children:"Role"}),(0,i.jsx)("th",{children:"Venue"}),(0,i.jsx)("th",{children:"Start Date"}),(0,i.jsx)("th",{children:"End Date"}),(0,i.jsx)("th",{children:"Remarks"}),(0,i.jsx)("th",{children:"Proof"}),(0,i.jsx)("th",{children:"Status"}),(0,i.jsx)("th",{children:"Approver Remarks"}),!e.viewFlag&&(0,i.jsx)("th",{children:"Action"})]}),r]})})}),e.facultyFlag&&(0,i.jsx)("div",{children:(0,i.jsx)(S,{token:e.token})}),(0,i.jsx)("div",{className:"modal fade",id:"editTrainingSeminar",tabIndex:"-1",role:"dialog","aria-labelledby":"editTrainingSeminarLabel","aria-hidden":"true",children:(0,i.jsx)("div",{className:"modal-dialog",role:"document",children:(0,i.jsxs)("div",{className:"modal-content",children:[(0,i.jsxs)("div",{className:"modal-header",children:[(0,i.jsx)("h5",{className:"modal-title",id:"editTrainingSeminarLabel",children:"Update Training/Seminar Information"}),(0,i.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,i.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,i.jsx)(f.J9,{enableReinitialize:!0,initialValues:d,onSubmit:function(){var r=(0,s.Z)(n().mark((function r(t){var a,s,l,i;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=document.getElementById("editTSForm"),(s=new FormData(a)).append("tsId",d.tsId),l=document.getElementById("trainingseminaralert"),r.next=6,D(s,e.token);case 6:1==(i=r.sent).success?(l.className="alert alert-success",l.style="visibility: visible",l.innerHTML=i.message):(l.className="alert alert-danger",i.error?l.innerHTML=i.error[0].message:l.innerHTML=i.message),$("#trainingseminaralert").fadeTo(5e3,500).slideUp(500,(function(){$("#trainingseminaralert").slideUp(500)})),x.default.push("/faculty/accomplishment");case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),children:function(e){e.values,e.errors,e.touched;var r=e.isSubmitting;return(0,i.jsxs)(f.l0,{id:"editTSForm",children:[(0,i.jsxs)("div",{className:"modal-body",children:[(0,i.jsx)("hr",{}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"TrainingSeminarUpdate",children:" Name of Training/Seminar "}),(0,i.jsx)(f.gN,{className:"form-control",type:"text",name:"title",id:"title",placeholder:"Input training/seminar"})]})}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"TrainingSeminarRoleUpdate",children:" Role "}),(0,i.jsx)(f.gN,{className:"form-control",type:"text",name:"role",id:"role",placeholder:"Input role"})]})}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"TrainingSeminarVenueUpdate",children:" Venue "}),(0,i.jsx)(f.gN,{className:"form-control",type:"text",name:"venue",id:"venue",placeholder:"Input venue"})]})}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"TrainingSeminarStartDateUpdate",children:" Start Date "}),(0,i.jsx)(f.gN,{type:"date",className:"form-control",name:"dateFrom",id:"dateFrom"})]})}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"TrainingSeminarEndDateUpdate",children:" End Date "}),(0,i.jsx)(f.gN,{type:"date",className:"form-control",name:"dateTo",id:"dateTo"})]})}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"TrainingSeminarVenueUpdate",children:" Remarks "}),(0,i.jsx)(f.gN,{className:"form-control",type:"text",name:"remarks",id:"remarks",placeholder:"Input remarks"})]})}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"TrainingSeminarProofUpdate",children:" Proof "}),(0,i.jsx)(f.gN,{type:"file",className:"form-control-file",name:"proof",id:"proof",value:void 0})]})})]}),(0,i.jsxs)("div",{className:"modal-footer",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"Close"}),(0,i.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:r,onClick:function(){$("#editTrainingSeminar").modal("toggle")},children:"Save changes"})]})]})}})]})})}),(0,i.jsx)("div",{className:"modal fade",id:"deleteTrainingSeminar",tabIndex:"-1",role:"dialog","aria-labelledby":"deleteTrainingSeminarLabel","aria-hidden":"true",children:(0,i.jsx)("div",{className:"modal-dialog",role:"document",children:(0,i.jsxs)("div",{className:"modal-content",children:[(0,i.jsxs)("div",{className:"modal-header",children:[(0,i.jsx)("h5",{className:"modal-title",id:"deleteTrainingSeminarLabel",children:"Delete Training/Seminar Information"}),(0,i.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,i.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,i.jsxs)("div",{className:"modal-body",children:[(0,i.jsx)("hr",{}),(0,i.jsx)("p",{children:" Are you sure you want to delete this training/seminar information? "})]}),(0,i.jsxs)("div",{className:"modal-footer",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"No, don't delete"}),(0,i.jsx)("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:(0,s.Z)(n().mark((function r(){var a,s;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return $("#deleteTrainingSeminar").modal("toggle"),a=document.getElementById("trainingseminaralert"),r.next=4,w(t,e.token);case 4:1==(s=r.sent).success?(a.className="alert alert-success",a.style="visibility: visible",a.innerHTML=s.message):(a.className="alert alert-danger",s.error?a.innerHTML=s.error[0].message:a.innerHTML=s.message),$("#trainingseminaralert").fadeTo(5e3,500).slideUp(500,(function(){$("#trainingseminaralert").slideUp(500)})),x.default.push("/faculty/accomplishment");case 8:case"end":return r.stop()}}),r)}))),children:"Yes, delete"})]})]})})}),(0,i.jsx)("div",{className:"modal fade",id:"approveTrainingSeminar",tabIndex:"-1",role:"dialog","aria-labelledby":"approveTrainingSeminarLabel","aria-hidden":"true",children:(0,i.jsx)("div",{className:"modal-dialog",role:"document",children:(0,i.jsxs)("div",{className:"modal-content",children:[(0,i.jsxs)("div",{className:"modal-header",children:[(0,i.jsx)("h5",{className:"modal-title",id:"approveTrainingSeminarLabel",children:"Approve Training/Seminar Information"}),(0,i.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,i.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,i.jsxs)("div",{className:"modal-body",children:[(0,i.jsx)("hr",{}),(0,i.jsx)("p",{children:" Are you sure you want to approve this training/seminar information? "})]}),(0,i.jsxs)("div",{className:"modal-footer",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"No, don't approve"}),(0,i.jsx)("button",{type:"button",className:"btn btn-danger",onClick:(0,s.Z)(n().mark((function r(){var t,s,l;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=document.getElementById("trainingseminaralert"),$("#approveTrainingSeminar").modal("toggle"),(s=new FormData).append("tsId",a),r.next=6,T(s,!0,e.facultyId,e.token);case 6:1==(l=r.sent).success?(t.className="alert alert-success",t.style="visibility: visible",t.innerHTML=l.message):(t.className="alert alert-danger",t.style="visibility: visible",l.error?t.innerHTML=l.error[0].message:t.innerHTML=l.message),$("#trainingseminaralert").fadeTo(5e3,500).slideUp(500,(function(){$("#trainingseminaralert").slideUp(500)})),x.default.push("/faculty/approval/"+e.facultyId,"/faculty/approval/"+e.facultyId);case 10:case"end":return r.stop()}}),r)}))),children:"Yes, approve"})]})]})})}),(0,i.jsx)("div",{className:"modal fade",id:"rejectTrainingSeminar",tabIndex:"-1",role:"dialog","aria-labelledby":"rejectTrainingSeminarLabel","aria-hidden":"true",children:(0,i.jsx)("div",{className:"modal-dialog",role:"document",children:(0,i.jsxs)("div",{className:"modal-content",children:[(0,i.jsxs)("div",{className:"modal-header",children:[(0,i.jsx)("h5",{className:"modal-title",id:"rejectTrainingSeminarLabel",children:"Reject Training/Seminar Information"}),(0,i.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,i.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,i.jsx)(f.J9,{enableReinitialize:!0,initialValues:d,onSubmit:function(){var r=(0,s.Z)(n().mark((function r(t){var s,l,i,c;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=document.getElementById("trainingseminaralert"),$("#rejectTrainingSeminar").modal("toggle"),l=document.getElementById("rejectTrainingSeminarForm"),(i=new FormData(l)).append("tsId",a),r.next=7,T(i,!1,e.facultyId,e.token);case 7:1==(c=r.sent).success?(s.className="alert alert-success",s.style="visibility: visible",s.innerHTML=c.message):(s.className="alert alert-danger",s.style="visibility: visible",c.error?s.innerHTML=c.error[0].message:s.innerHTML=c.message),$("#trainingseminaralert").fadeTo(5e3,500).slideUp(500,(function(){$("#trainingseminaralert").slideUp(500)})),x.default.push("/faculty/approval/"+e.facultyId,"/faculty/approval/"+e.facultyId);case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),children:function(e){e.values,e.errors,e.touched;var r=e.isSubmitting;return(0,i.jsxs)(f.l0,{id:"rejectTrainingSeminarForm",children:[(0,i.jsxs)("div",{className:"modal-body",children:[(0,i.jsx)("hr",{}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"RejectionRemarks",children:" Reason/Remarks for Rejection "}),(0,i.jsx)(f.gN,{className:"form-control",type:"text",name:"approverRemarks",placeholder:"Input remarks",required:!0})]})})]}),(0,i.jsxs)("div",{className:"modal-footer",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"Close"}),(0,i.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:r,onClick:function(){$("#rejectTrainingSeminar").modal("toggle")},children:"Save changes"})]})]})}})]})})})]})}}}]);