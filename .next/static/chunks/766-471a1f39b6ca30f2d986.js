(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[766],{14176:function(e,t,a){"use strict";a(85893),a(9008),a(41664),a(37940)},60377:function(e,t,a){"use strict";a.d(t,{Z:function(){return x}});var s=a(809),n=a.n(s),r=a(92447),i=a(85893),l=a(26265),c=a(64121),o=(a(41664),a(67294)),u=a(11163),d=a(9669),p=a.n(d);function m(e,t){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)(n().mark((function e(t,a){var s,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!a){e.next=7;break}return s="http://localhost:3001/api/user/"+"".concat(t.userId),e.next=5,p()({method:"PUT",url:s,data:{status:"".concat(t.status),remarks:"".concat(t.remarks)},headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}});case 5:return r=e.sent,e.abrupt("return",r.data);case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){(0,l.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var x=function(e){var t,a,s,d,p,h=0,f=o.useState({userId:0,status:"",remarks:"",facultyName:""}),x=(0,c.Z)(f,2),v=x[0],g=x[1];function y(e,t){var a;g(j(j({},v),{},"status"==e?(a={},(0,l.Z)(a,e,t.target.value),(0,l.Z)(a,"remarks",""),a):(0,l.Z)({},e,t.target.value)))}if("Inactive"==v.status?(d="none",p="block"):(d="block",p="none"),null==e.children)return(0,i.jsx)("p",{align:"center",children:"No approvals needed!"});var b,N=function(e){h=e},_=function(){var t=(0,r.Z)(n().mark((function t(a){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object.keys(e.children).map(function(){var t=(0,r.Z)(n().mark((function t(s){var i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.children[s].faculty_units,t.next=3,Object.keys(i).map(function(){var e=(0,r.Z)(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i[t].faculty_personal_info.user.userId!=a){e.next=3;break}return e.next=3,g({userId:a,status:i[t].faculty_personal_info.user.status,remarks:i[t].faculty_personal_info.user.remarks,facultyName:i[t].faculty_personal_info.lastName+", "+i[t].faculty_personal_info.firstName});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return"approval"==e.path?b="/faculty/approval/":"admin"==e.path?b="/admin/":"info"==e.path&&(b="/faculty/view/"),t=Object.keys(e.children).map((function(t){if(1==e.children[t].unitId){var a=e.children[t].faculty_units,s=Object.keys(a).map((function(t){var s,n,r=a[t].faculty_personal_info.lastName,l=a[t].faculty_personal_info.firstName,c=a[t].facultyId,o=a[t].forApprovalCount;return a[t].faculty_personal_info.faculty_update&&(n=a[t].faculty_personal_info.faculty_update.updatedAt.split("T")[0]),"approval"!=e.path&&(s="disabled btn ","Active"==a[t].faculty_personal_info.user.status?s+="btn-warning":s+="btn-danger"),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("div",{className:"list-group",children:(0,i.jsxs)("a",{href:"".concat(b+encodeURIComponent(c)),className:"list-group-item list-group-item-action list-group-item-light",forApproval:a[t].faculty_personal_info,children:[r,", ",l,"\xa0 ",(0,i.jsx)("span",{className:"badge badge-danger",children:o}),"info"==e.path&&3==e.role&&n&&" (Last Updated: ".concat(n,")")]})})}),"approval"!=e.path&&(0,i.jsx)("td",{children:(0,i.jsx)("span",{className:s,children:a[t].faculty_personal_info.user.status})}),"approval"!=e.path&&(0,i.jsx)("td",{children:a[t].faculty_personal_info.user.remarks||"None"}),5==e.role&&(0,i.jsx)("td",{children:(0,i.jsx)("a",{className:"btn btn-info","data-toggle":"modal","data-dismiss":"modal","data-target":"#editStatus",onClick:function(){N(a[t].faculty_personal_info.user.userId),_(h)},children:"Edit"})})]})}));return(0,i.jsxs)("div",{children:[(0,i.jsxs)("h4",{align:"center",children:[" ",e.children[t].unit," "]}),(0,i.jsx)("div",{className:"table-responsive",children:(0,i.jsxs)("table",{className:"table",children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Name"}),"approval"!=e.path&&(0,i.jsx)("th",{children:"Status"}),"approval"!=e.path&&(0,i.jsx)("th",{children:"Remarks"}),5==e.role&&(0,i.jsx)("th",{children:"Action"})]}),s]})})]})}})),a=Object.keys(e.children).map((function(t){if(2==e.children[t].unitId){var a=e.children[t].faculty_units,s=Object.keys(a).map((function(t){var s,n,r=a[t].faculty_personal_info.lastName,l=a[t].faculty_personal_info.firstName,c=a[t].facultyId,o=a[t].forApprovalCount;return a[t].faculty_personal_info.faculty_update&&(n=a[t].faculty_personal_info.faculty_update.updatedAt.split("T")[0]),"approval"!=e.path&&(s="disabled btn ","Active"==a[t].faculty_personal_info.user.status?s+="btn-warning":s+="btn-danger"),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("div",{className:"list-group",children:(0,i.jsxs)("a",{href:"".concat(b+encodeURIComponent(c)),className:"list-group-item list-group-item-action list-group-item-light",children:[r,", ",l,"\xa0 ",(0,i.jsx)("span",{className:"badge badge-danger",children:o}),"info"==e.path&&3==e.role&&n&&" (Last Updated: ".concat(n,")")]})})}),"approval"!=e.path&&(0,i.jsx)("td",{children:(0,i.jsx)("span",{className:s,children:a[t].faculty_personal_info.user.status})}),"approval"!=e.path&&(0,i.jsx)("td",{children:a[t].faculty_personal_info.user.remarks||"None"}),5==e.role&&(0,i.jsx)("td",{children:(0,i.jsx)("a",{className:"btn btn-info","data-toggle":"modal","data-dismiss":"modal","data-target":"#editStatus",onClick:function(){N(a[t].faculty_personal_info.user.userId),_(h)},children:"Edit"})})]})}));return(0,i.jsxs)("div",{children:[(0,i.jsxs)("h4",{align:"center",children:[" ",e.children[t].unit," "]}),(0,i.jsx)("div",{className:"table-responsive",children:(0,i.jsxs)("table",{className:"table",children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Name"}),"approval"!=e.path&&(0,i.jsx)("th",{children:"Status"}),"approval"!=e.path&&(0,i.jsx)("th",{children:"Remarks"}),5==e.role&&(0,i.jsx)("th",{children:"Action"})]}),s]})})]})}})),s=Object.keys(e.children).map((function(t){if(3==e.children[t].unitId){var a=e.children[t].faculty_units,s=Object.keys(a).map((function(t){var s,n,r=a[t].faculty_personal_info.lastName,l=a[t].faculty_personal_info.firstName,c=a[t].facultyId,o=a[t].forApprovalCount;return a[t].faculty_personal_info.faculty_update&&(n=a[t].faculty_personal_info.faculty_update.updatedAt.split("T")[0]),"approval"!=e.path&&(s="disabled btn ","Active"==a[t].faculty_personal_info.user.status?s+="btn-warning":s+="btn-danger"),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("div",{className:"list-group",children:(0,i.jsxs)("a",{href:"".concat(b+encodeURIComponent(c)),className:"list-group-item list-group-item-action list-group-item-light",children:[r,", ",l,"\xa0 ",(0,i.jsx)("span",{className:"badge badge-danger",children:o}),"info"==e.path&&3==e.role&&n&&" (Last Updated: ".concat(n,")")]})})}),"approval"!=e.path&&(0,i.jsx)("td",{children:(0,i.jsx)("span",{className:s,children:a[t].faculty_personal_info.user.status})}),"approval"!=e.path&&(0,i.jsx)("td",{children:a[t].faculty_personal_info.user.remarks||"None"}),5==e.role&&(0,i.jsx)("td",{children:(0,i.jsx)("a",{className:"btn btn-info","data-toggle":"modal","data-dismiss":"modal","data-target":"#editStatus",onClick:function(){N(a[t].faculty_personal_info.user.userId),_(h)},children:"Edit"})})]})}));return(0,i.jsxs)("div",{children:[(0,i.jsxs)("h4",{align:"center",children:[" ",e.children[t].unit," "]}),(0,i.jsx)("div",{className:"table-responsive",children:(0,i.jsxs)("table",{className:"table",children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Name"}),"approval"!=e.path&&(0,i.jsx)("th",{children:"Status"}),"approval"!=e.path&&(0,i.jsx)("th",{children:"Remarks"}),5==e.role&&(0,i.jsx)("th",{children:"Action"})]}),s]})})]})}})),(0,i.jsxs)("div",{children:[(0,i.jsx)("br",{}),(0,i.jsx)("div",{className:"alert alert-success",role:"alert",id:"facultyStatusalert",style:{visibility:"hidden"}}),(0,i.jsx)("br",{}),t,(0,i.jsx)("br",{}),a,(0,i.jsx)("br",{}),s,(0,i.jsx)("div",{className:"modal fade",id:"editStatus",tabIndex:"-1",role:"dialog","aria-labelledby":"editStatus","aria-hidden":"true",children:(0,i.jsx)("div",{className:"modal-dialog",role:"document",children:(0,i.jsxs)("div",{className:"modal-content",children:[(0,i.jsxs)("div",{className:"modal-header",children:[(0,i.jsxs)("h5",{className:"modal-title",id:"editStatus",children:["Update Faculty Status - ",v.facultyName]}),(0,i.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,i.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,i.jsx)("div",{className:"modal-body",children:(0,i.jsxs)("form",{children:[(0,i.jsx)("hr",{}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"Status",children:" Status "}),(0,i.jsxs)("select",{className:"form-control",name:"Status",id:"Status",value:v.status,onChange:function(e){return y("status",e)},children:[(0,i.jsx)("option",{value:"Active",children:"Active"},"active"),(0,i.jsx)("option",{value:"Inactive",children:"Inactive"},"inactive")]})]})}),(0,i.jsx)("div",{className:"form-row",id:"activeremarksrow",style:{display:d},children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"Remarks",children:" Remarks "}),(0,i.jsxs)("select",{className:"form-control",name:"Remarks",id:"Remarks",value:v.remarks||"",onChange:function(e){return y("remarks",e)},children:[(0,i.jsx)("option",{value:"",children:"-- SELECT REMARKS --"}),(0,i.jsx)("option",{value:"On Leave",children:"On Leave"})]})]})}),(0,i.jsx)("div",{className:"form-row",id:"inactiveremarksrow",style:{display:p},children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"Remarks",children:" Remarks "}),(0,i.jsxs)("select",{className:"form-control",name:"Remarks",id:"Remarks",value:v.remarks||"",onChange:function(e){return y("remarks",e)},children:[(0,i.jsx)("option",{value:"",children:"-- SELECT REMARKS --"}),(0,i.jsx)("option",{value:"Retired",children:"Retired"}),(0,i.jsx)("option",{value:"Resigned",children:"Resigned"})]})]})})]})}),(0,i.jsxs)("div",{className:"modal-footer",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"Close"}),(0,i.jsx)("button",{type:"button",className:"btn btn-primary",onClick:(0,r.Z)(n().mark((function t(){var a,s;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return $("#editStatus").modal("toggle"),a=document.getElementById("facultyStatusalert"),t.next=4,m(v,e.token);case 4:1==(s=t.sent).success?(a.className="alert alert-success",a.style="visibility: visible",a.innerHTML=s.message):(a.className="alert alert-danger",s.error?a.innerHTML=s.error[0].message:a.innerHTML=s.message),$("#facultyStatusalert").fadeTo(5e3,500).slideUp(500,(function(){$("#facultyStatusalert").slideUp(500)})),u.default.push("/admin");case 8:case"end":return t.stop()}}),t)}))),children:"Save changes"})]})]})})})]})}},81318:function(e,t,a){"use strict";a(85893),a(41664)},8237:function(e,t,a){"use strict";var s=a(85893),n=a(65988),r=a(41664);t.Z=function(e){var t="";switch(e.role){case 1:t="Faculty";break;case 2:t="Unit Head";break;case 3:t="Department Chair";break;default:t="Admin Clerk"}return(0,s.jsxs)("div",{className:"jsx-3546386183 row",children:[(0,s.jsxs)("nav",{className:"jsx-3546386183 navbar navbar-expand-lg",children:[(0,s.jsx)("span",{className:"jsx-3546386183 navbar-text",children:(0,s.jsx)("a",{className:"jsx-3546386183 navbar-brand",children:(0,s.jsx)("img",{src:"/dpsm-seal.png",width:"186",height:"150",alt:"DPSM-QA-Portal",className:"jsx-3546386183 d-inline-block align-top"})})}),(0,s.jsx)("h2",{className:"jsx-3546386183",children:" DPSM QA PORTAL "}),(0,s.jsx)("div",{className:"jsx-3546386183 ml-auto",children:(0,s.jsxs)("h5",{className:"jsx-3546386183",children:[" Currently Logged In: ",(0,s.jsx)(r.default,{href:"/settings/change-password",children:(0,s.jsxs)("a",{className:"jsx-3546386183",children:[" ",e.name," (",t,") "]})})," "]})})]}),(0,s.jsx)(n.default,{id:"3546386183",children:[".navbar.jsx-3546386183{background-color:#910303;width:100%;}","h2.jsx-3546386183,h5.jsx-3546386183{font-family:Georgia;color:#fff;}"]})]})}},97752:function(e,t,a){"use strict";var s=a(85893),n=a(9008),r=a(8237),i=a(37940);a(81318),a(14176),a(49704);t.Z=function(e){var t;return e.approvalList&&(t=e.approvalList),(0,s.jsxs)("div",{className:"container-fluid",children:[(0,s.jsxs)(n.default,{children:[(0,s.jsx)("title",{children:"DPSM-QA-PORTAL"}),(0,s.jsx)("link",{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"}),(0,s.jsx)("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css"}),(0,s.jsx)("script",{src:"https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"}),(0,s.jsx)("script",{src:"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"}),(0,s.jsx)("script",{src:"https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"})]}),(0,s.jsx)(r.Z,{name:e.name,role:e.role}),(0,s.jsxs)("div",{className:"row",id:"layout_row",children:[(0,s.jsx)(i.Z,{role:e.role,approvalList:t,facultyId:e.facultyId,roleAssignment:e.roleAssignmentFlag}),(0,s.jsx)("div",{className:"col",id:"layout_content",children:e.children})]})]})}},37940:function(e,t,a){"use strict";var s=a(85893),n=a(64121),r=a(65988),i=a(41664),l=a(12102),c=a(67294),o=a(11163);t.Z=function(e){var t=(0,o.useRouter)(),a=(0,l.Z)(["user"]),u=(0,n.Z)(a,3),d=(u[0],u[1],u[2]),p=!0,m=!0;1!=e.role&&2!=e.role&&3!=e.role||(m=!1,2!=e.role&&3!=e.role||(p=!1));var h=(0,c.useState)("false"),f=h[0],j=h[1];return(0,s.jsxs)("div",{id:"sidebar",children:[(0,s.jsx)("div",{className:"alert alert-info col-12 d-md-none text-center",onClick:function(){j(!f)},children:" Main Menu "}),(0,s.jsxs)("div",{id:"menu",className:"jsx-1836586042 "+((f?null:"d-none d-md-block")||""),children:[(0,s.jsxs)("div",{className:"jsx-1836586042 list-group col-12",children:[(0,s.jsx)("a",{"data-toggle":"collapse","data-target":"#facultyMenu","aria-controls":"facultyMenu",className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-secondary",children:" Faculty "}),(0,s.jsxs)("div",{id:"facultyMenu",className:"jsx-1836586042 collapse show",children:[!m&&!p&&(0,s.jsx)(i.default,{href:{pathname:"/faculty"},children:(0,s.jsx)("a",{id:"/faculty"===t.pathname?"active":"inactive",className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-success",children:"Dashboard"})}),!m&&(0,s.jsx)(i.default,{href:{pathname:"/faculty/basic-info"},children:(0,s.jsx)("a",{id:"/faculty/basic-info"===t.pathname?"active":"inactive",className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-success",children:"Basic Information"})}),!m&&(0,s.jsx)(i.default,{href:{pathname:"/faculty/accomplishment"},children:(0,s.jsx)("a",{id:"/faculty/accomplishment"===t.pathname?"active":"inactive",className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-success",children:"Accomplishment"})}),!m&&(0,s.jsx)(i.default,{href:{pathname:"/faculty/faculty-load"},children:(0,s.jsx)("a",{id:"/faculty/faculty-load"===t.pathname?"active":"inactive",className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-success",children:"Faculty Load"})}),!m&&(0,s.jsx)(i.default,{href:{pathname:"/faculty/evaluation"},children:(0,s.jsx)("a",{id:"/faculty/evaluation"===t.pathname?"active":"inactive",className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-success ",children:"Peer Evaluation"})}),!m&&!p&&(0,s.jsx)(i.default,{href:{pathname:"/faculty/view/all"},children:(0,s.jsx)("a",{id:"/faculty/view/all"===t.pathname?"active":"inactive",className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-success ",children:"Faculty List"})}),!m&&!p&&(0,s.jsx)(i.default,{href:{pathname:"/faculty/approval"},children:(0,s.jsxs)("a",{id:"/faculty/approval"===t.pathname?"active":"inactive",className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-success ",children:["Pending Approvals \xa0",e.approvalList.facultyCount>0&&(0,s.jsx)("span",{className:"jsx-1836586042 badge badge-danger",children:e.approvalList.facultyCount})]})}),m&&(0,s.jsx)(i.default,{href:{pathname:"/admin"},children:(0,s.jsx)("a",{id:"/admin"===t.pathname?"active":"inactive",className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-success ",children:"Faculty List"})}),!m&&!p&&e.roleAssignment&&(0,s.jsx)(i.default,{href:{pathname:"/faculty/role-assignment"},children:(0,s.jsxs)("a",{id:"/faculty/role-assignment"===t.pathname?"active":"inactive",className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-success",children:["Role Assignment \xa0",(0,s.jsx)("span",{className:"jsx-1836586042 badge badge-danger",children:"!"})]})}),!m&&!p&&!e.roleAssignment&&(0,s.jsx)(i.default,{href:{pathname:"/faculty/role-assignment"},children:(0,s.jsx)("a",{id:"/faculty/role-assignment"===t.pathname?"active":"inactive",className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-success",children:"Role Assignment"})})]})]}),(0,s.jsx)("div",{className:"jsx-1836586042 list-group col-12",children:(0,s.jsx)(i.default,{href:"/student",children:(0,s.jsx)("a",{className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-secondary",children:"Student"})})}),(0,s.jsx)("div",{className:"jsx-1836586042 list-group col-12",children:(0,s.jsx)(i.default,{href:"/alumni",children:(0,s.jsx)("a",{className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-secondary",children:"Alumni"})})}),(0,s.jsx)("div",{className:"jsx-1836586042 list-group col-12",children:(0,s.jsx)(i.default,{href:"/department-activities",children:(0,s.jsx)("a",{className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-secondary",children:"Department Activities"})})}),(0,s.jsx)("div",{className:"jsx-1836586042 list-group col-12",children:(0,s.jsx)(i.default,{href:"/login",children:(0,s.jsx)("a",{onClick:function(){d("user")},className:"jsx-1836586042 list-group-item list-group-item-action list-group-item-danger",children:"Log Out"})})}),(0,s.jsx)(r.default,{id:"1836586042",children:["#menu.jsx-1836586042{background-color:#017823;}",".list-group-item-success.jsx-1836586042{text-indent:20%;}","#active.jsx-1836586042{background-color:#005919;color:#fff;}"]})]})]})}},92447:function(e,t,a){"use strict";function s(e,t,a,s,n,r,i){try{var l=e[r](i),c=l.value}catch(o){return void a(o)}l.done?t(c):Promise.resolve(c).then(s,n)}function n(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var i=e.apply(t,a);function l(e){s(i,n,r,l,c,"next",e)}function c(e){s(i,n,r,l,c,"throw",e)}l(void 0)}))}}a.d(t,{Z:function(){return n}})},80950:function(){},46601:function(){},89214:function(){},8623:function(){},7748:function(){},85568:function(){},56619:function(){},77108:function(){},52361:function(){},94616:function(){}}]);