(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[187],{59187:function(e,t,r){"use strict";r.d(t,{Z:function(){return Z}});var a=r(85893),s=r(65988),n=r(61588),l=r(809),c=r.n(l),o=r(92447),i=r(64121),d=r(11163),u=r(67294),m=r(17513),h=r(9669),f=r.n(h),p=r(49704),b=r.n(p);function y(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var a=0,s=function(){};return{s:s,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,l=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return l=e.done,e},e:function(e){c=!0,n=e},f:function(){try{l||null==r.return||r.return()}finally{if(c)throw n}}}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function j(e,t,r){return v.apply(this,arguments)}function v(){return(v=(0,o.Z)(c().mark((function e(t,r,a){var s,n,l,o,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r){e.next=12;break}s="http://localhost:3001/api/faculty/load/"+a,""==t.get("setResults")&&t.delete("setResults"),n=y(t.entries());try{for(n.s();!(l=n.n()).done;)o=l.value,console.log(o[0]+" "+o[1])}catch(c){n.e(c)}finally{n.f()}return e.next=8,f()({method:"PUT",url:s,data:t,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(r)}});case 8:return i=e.sent,e.abrupt("return",i.data);case 12:console.log(access.result.message);case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}function g(e,t,r){return N.apply(this,arguments)}function N(){return(N=(0,o.Z)(c().mark((function e(t,r,a){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r){e.next=13;break}return e.prev=2,e.next=5,f().delete("http://localhost:3001/api/faculty/load/"+a,{headers:{Authorization:"Bearer ".concat(r)},data:{recordId:"".concat(t)}});case 5:return s=e.sent,e.abrupt("return",s.data);case 9:return e.prev=9,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",e.t0);case 13:e.next=19;break;case 15:return e.prev=15,e.t1=e.catch(0),console.error(e.t1),e.abrupt("return",e.t1);case 19:case"end":return e.stop()}}),e,null,[[0,15],[2,9]])})))).apply(this,arguments)}var k=function(e){var t=0,r=0;function s(e){r=e}function n(t){Object.keys(e.records).map((function(r){e.records[r].recordId==t&&p(e.records[r])}))}var l=u.useState({recordId:0,subject:"",section:"",setResults:"",syllabus:""}),h=(0,i.Z)(l,2),f=h[0],p=h[1],b=Object.keys(e.records).map((function(l){return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.records[l].subject}),(0,a.jsx)("td",{children:e.records[l].section}),e.facultyFlag&&(0,a.jsxs)("td",{children:[e.records[l].syllabus&&(0,a.jsxs)("div",{className:"btn-grp",children:[(0,a.jsx)("a",{className:"btn btn-info",href:"http://localhost:3001/"+e.records[l].syllabus,style:{color:"white"},target:"_blank",children:"View"}),(0,a.jsx)("a",{className:"btn btn-warning","data-toggle":"modal","data-target":"#addSyllabus",onClick:function(){s(e.records[l].recordId),n(r)},children:"Edit"})]}),!e.records[l].syllabus&&(0,a.jsx)("a",{className:"btn btn-warning","data-toggle":"modal","data-target":"#addSyllabus",onClick:function(){s(e.records[l].recordId),n(r)},children:"Add Syllabus"})]}),e.facultyFlag&&(0,a.jsxs)("td",{children:[e.records[l].setResults&&(0,a.jsxs)("div",{className:"btn-grp",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){var t=e.records[l].setResults;downloadProof(t,e.token)},children:"Download"}),(0,a.jsx)("a",{className:"btn btn-info",href:"http://localhost:3001/"+e.records[l].setResults,style:{color:"white"},target:"_blank",children:"Preview"})]}),!e.records[l].setResults&&(0,a.jsx)("div",{children:"None"})]}),e.clerkFlag&&(0,a.jsxs)("td",{children:[e.records[l].setResults&&(0,a.jsxs)("div",{className:"btn-grp",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){var t=e.records[l].setResults;downloadProof(t,e.token)},children:"Download"}),(0,a.jsx)("a",{className:"btn btn-info",href:"http://localhost:3001/"+e.records[l].setResults,style:{color:"white"},target:"_blank",children:"Preview"})]}),!e.records[l].setResults&&(0,a.jsx)("div",{children:"None"})]}),e.clerkFlag&&(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"btn-group",children:[(0,a.jsx)("a",{className:"btn btn-info","data-toggle":"modal","data-target":"#editClass",onClick:function(){s(e.records[l].recordId),n(r)},children:"Edit"}),(0,a.jsx)("a",{className:"btn btn-danger","data-toggle":"modal","data-target":"#deleteClass",onClick:function(){var r;r=e.records[l].recordId,t=r},children:"Delete"})]})})]},e.records[l].recordId)}));return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"table-responsive",children:(0,a.jsxs)("table",{className:"table table-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Subject"}),(0,a.jsx)("th",{children:"Section"}),!e.clerkFlag&&(0,a.jsx)("th",{children:"Syllabus"}),(0,a.jsx)("th",{children:"SET"}),e.clerkFlag&&(0,a.jsx)("th",{children:"Action"})]})}),(0,a.jsx)("tbody",{children:b})]})}),(0,a.jsx)("div",{className:"modal fade",id:"editClass",tabIndex:"-1",role:"dialog","aria-labelledby":"editClassLabel","aria-hidden":"true",children:(0,a.jsx)("div",{className:"modal-dialog",role:"document",children:(0,a.jsxs)("div",{className:"modal-content",children:[(0,a.jsxs)("div",{className:"modal-header",children:[(0,a.jsx)("h5",{className:"modal-title",id:"editClassLabel",children:"Update Class Record"}),(0,a.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,a.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,a.jsx)(m.J9,{enableReinitialize:!0,initialValues:f,onSubmit:function(){var t=(0,o.Z)(c().mark((function t(r){var a,s,n,l;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=document.getElementById("loadalert"),s=document.getElementById("editClassForm"),(n=new FormData(s)).append("recordId",f.recordId),t.next=6,j(n,e.token,e.facultyId);case 6:1==(l=t.sent).success?(a.className="alert alert-success",a.style="visibility: visible",a.innerHTML=l.message):(a.className="alert alert-danger",l.error?a.innerHTML=l.error[0].message:a.innerHTML=l.message),$("#loadalert").fadeTo(5e3,500).slideUp(500,(function(){$("#loadalert").slideUp(500)})),d.default.push("/admin/"+e.facultyId,"/admin/"+e.facultyId);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:function(e){e.values,e.errors,e.touched;var t=e.isSubmitting;return(0,a.jsxs)(m.l0,{id:"editClassForm",children:[(0,a.jsxs)("div",{className:"modal-body",children:[(0,a.jsx)("div",{className:"form-row",children:(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"subject",children:" Subject "}),(0,a.jsx)(m.gN,{className:"form-control",type:"text",name:"subject",placeholder:"Input subject"})]})}),(0,a.jsx)("div",{className:"form-row",children:(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"section",children:" Section "}),(0,a.jsx)(m.gN,{className:"form-control",type:"text",name:"section",placeholder:"Input section"})]})}),(0,a.jsx)("div",{className:"form-row",children:(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"setResults",children:" Add SET Results "}),(0,a.jsx)(m.gN,{type:"file",className:"form-control-file",name:"setResults",id:"setResults",value:void 0}),(0,a.jsx)(m.gN,{type:"hidden",className:"form-control",name:"syllabus",value:""})]})})]}),(0,a.jsxs)("div",{className:"modal-footer",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"Close"}),(0,a.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:t,onClick:function(){$("#editClass").modal("toggle")},children:"Save changes"})]})]})}})]})})}),(0,a.jsx)("div",{className:"modal fade",id:"addSyllabus",tabIndex:"-1",role:"dialog","aria-labelledby":"addSyllabusLabel","aria-hidden":"true",children:(0,a.jsx)("div",{className:"modal-dialog",role:"document",children:(0,a.jsxs)("div",{className:"modal-content",children:[(0,a.jsxs)("div",{className:"modal-header",children:[(0,a.jsx)("h5",{className:"modal-title",id:"addSyllabusLabel",children:"Update Class Records"}),(0,a.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,a.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,a.jsx)(m.J9,{enableReinitialize:!0,initialValues:f,onSubmit:function(){var t=(0,o.Z)(c().mark((function t(r){var a,s,n,l;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=document.getElementById("loadalert"),s=document.getElementById("addSyllForm"),(n=new FormData(s)).append("recordId",f.recordId),t.next=6,j(n,e.token,e.facultyId);case 6:1==(l=t.sent).success?(a.className="alert alert-success",a.style="visibility: visible",a.innerHTML=l.message):(a.className="alert alert-danger",l.error?a.innerHTML=l.error[0].message:a.innerHTML=l.message),$("#loadalert").fadeTo(5e3,500).slideUp(500,(function(){$("#loadalert").slideUp(500)})),d.default.push("/faculty/faculty-load","/faculty/faculty-load");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:function(e){e.values,e.errors,e.touched;var t=e.isSubmitting;return(0,a.jsxs)(m.l0,{id:"addSyllForm",children:[(0,a.jsx)("div",{className:"modal-body",children:(0,a.jsx)("div",{className:"form-row",children:(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"syllabus",children:" Add Syllabus "}),(0,a.jsx)(m.gN,{type:"file",className:"form-control-file",name:"syllabus",id:"syllabus",value:void 0}),(0,a.jsx)(m.gN,{type:"hidden",className:"form-control",name:"subject"}),(0,a.jsx)(m.gN,{type:"hidden",className:"form-control",name:"section"}),(0,a.jsx)(m.gN,{type:"hidden",className:"form-control",name:"setResults"})]})})}),(0,a.jsxs)("div",{className:"modal-footer",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"Close"}),(0,a.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:t,onClick:function(){$("#addSyllabus").modal("toggle")},children:"Save changes"})]})]})}})]})})}),(0,a.jsx)("div",{className:"modal fade",id:"deleteClass",tabIndex:"-1",role:"dialog","aria-labelledby":"deleteClassLabel","aria-hidden":"true",children:(0,a.jsx)("div",{className:"modal-dialog",role:"document",children:(0,a.jsxs)("div",{className:"modal-content",children:[(0,a.jsxs)("div",{className:"modal-header",children:[(0,a.jsx)("h5",{className:"modal-title",id:"deleteClassLabel",children:"Delete Class Record Information"}),(0,a.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,a.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,a.jsxs)("div",{className:"modal-body",children:[(0,a.jsx)("hr",{}),(0,a.jsx)("p",{children:" Are you sure you want to delete this class record? "})]}),(0,a.jsxs)("div",{className:"modal-footer",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"No, don't delete"}),(0,a.jsx)("button",{type:"button",className:"btn btn-danger",onClick:(0,o.Z)(c().mark((function r(){var a,s;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=document.getElementById("loadalert"),$("#deleteClass").modal("toggle"),r.next=4,g(t,e.token,e.facultyId);case 4:1==(s=r.sent).success?(a.className="alert alert-success",a.style="visibility: visible",a.innerHTML=s.message):(a.className="alert alert-danger",s.error?a.innerHTML=s.error[0].message:a.innerHTML=s.message),$("#loadalert").fadeTo(5e3,500).slideUp(500,(function(){$("#loadalert").slideUp(500)})),d.default.push("/admin/"+e.facultyId,"/admin/"+e.facultyId);case 8:case"end":return r.stop()}}),r)}))),children:"Yes, delete"})]})]})})})]})},S=r(74047),w=r(52700),I=r(8127),C=r(58580),F=r(20775);function R(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var a=0,s=function(){};return{s:s,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,l=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return l=e.done,e},e:function(e){c=!0,n=e},f:function(){try{l||null==r.return||r.return()}finally{if(c)throw n}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function T(e,t){return L.apply(this,arguments)}function L(){return(L=(0,o.Z)(c().mark((function e(t,r){var a,s,n,l,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=b().decode(r),a.facultyId,e.prev=2,!r){e.next=17;break}e.prev=4,s=R(t.values());try{for(s.s();!(n=s.n()).done;)l=n.value,console.log(l)}catch(c){s.e(c)}finally{s.f()}return e.next=9,f()({method:"POST",url:"http://localhost:3001/api/faculty/load",data:t,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(r)}});case 9:return o=e.sent,e.abrupt("return",o.data);case 13:return e.prev=13,e.t0=e.catch(4),console.error(e.t0),e.abrupt("return",e.t0);case 17:e.next=23;break;case 19:return e.prev=19,e.t1=e.catch(2),console.error(e.t1),e.abrupt("return",e.t1);case 23:case"end":return e.stop()}}),e,null,[[2,19],[4,13]])})))).apply(this,arguments)}function M(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,F.Z)(e);if(t){var s=(0,F.Z)(this).constructor;r=Reflect.construct(a,arguments,s)}else r=a.apply(this,arguments);return(0,C.Z)(this,r)}}var Y=function(e){(0,I.Z)(r,e);var t=M(r);function r(e){return(0,S.Z)(this,r),t.call(this,e)}return(0,w.Z)(r,[{key:"render",value:function(){for(var e=this,t=[],r=(new Date).getFullYear(),s=r;s>=1970;s--)t.push(s);var n=Object.keys(t).map((function(e){return(0,a.jsxs)("option",{value:t[e],children:[t[e]-1,"-",t[e]]})})),l={subject:"",section:"",semester:"1st Semester",acadYear:r,syllabus:""};return(0,a.jsx)(m.J9,{initialValues:l,onSubmit:function(){var t=(0,o.Z)(c().mark((function t(r,a){var s,n,l,o,i;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=a.resetForm,n=document.getElementById("facLoadForm"),l=new FormData(n),t.next=5,T(l,e.props.token);case 5:o=t.sent,i=document.getElementById("loadalert"),1==o.success?(i.className="alert alert-success",i.style="visibility: visible",i.innerHTML=o.message):(i.className="alert alert-danger",o.error?i.innerHTML=o.error[0].message:i.innerHTML=o.message),i.setAttribute("style","visibility: visible"),$("#loadalert").fadeTo(5e3,500).slideUp(500,(function(){$("#loadalert").slideUp(500)})),s(),d.default.push("/admin/"+e.props.facultyId);case 12:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),children:function(t){t.values,t.errors,t.touched;var r=t.isSubmitting;return(0,a.jsxs)(m.l0,{id:"facLoadForm",children:[(0,a.jsx)("hr",{}),(0,a.jsx)("h5",{children:"Add Faculty Load"}),(0,a.jsx)("br",{}),(0,a.jsxs)("div",{className:"form-row",children:[(0,a.jsx)(m.gN,{className:"form-control",type:"hidden",name:"facultyId",value:e.props.facultyId}),(0,a.jsxs)("div",{className:"form-group col-md-2",children:[(0,a.jsx)("label",{htmlFor:"Subject",children:" Subject "}),(0,a.jsx)(m.gN,{className:"form-control",type:"text",name:"subject",placeholder:"Input subject"})]}),(0,a.jsxs)("div",{className:"form-group col-md-2",children:[(0,a.jsx)("label",{htmlFor:"Section",children:" Section "}),(0,a.jsx)(m.gN,{className:"form-control",type:"text",name:"section",placeholder:"Input section"})]}),(0,a.jsxs)("div",{className:"form-group col-md-3",children:[(0,a.jsx)("label",{htmlFor:"Semester",children:" Semester "}),(0,a.jsxs)(m.gN,{as:"select",className:"form-control",name:"semester",required:!0,children:[(0,a.jsx)("option",{value:"1st",children:"1st Semester"}),(0,a.jsx)("option",{value:"2nd",children:"2nd Semester"}),(0,a.jsx)("option",{value:"Midyear",children:"Mid-Year"})]})]}),(0,a.jsxs)("div",{className:"form-group col-md-2",children:[(0,a.jsx)("label",{htmlFor:"Year",children:" Academic Year "}),(0,a.jsx)(m.gN,{as:"select",className:"form-control",name:"academicYear",required:!0,children:n})]})]}),(0,a.jsx)("br",{}),(0,a.jsx)("button",{type:"submit",className:"btn btn-primary col-md-12",disabled:r,children:"Submit"})]})}})}}]),r}(u.Component);var Z=function(e){var t;if(null!=e.children){var r=[],l=[],c=e.children[0].academicYear;Object.keys(e.children).map((function(t){if(c==e.children[t].academicYear&&t!=e.children.length-1)r.push(e.children[t]);else{t==e.children.length-1&&r.push(e.children[t]);var a=[],s=[],n=r[0].semester;Object.keys(r).map((function(e){n==r[e].semester?a.push(r[e]):(s.push(a),(a=[]).push(r[e]),n=r[e].semester),e==r.length-1&&s.push(a)})),l.push(s),(r=[]).push(e.children[t]),c=e.children[t].academicYear}})),t=Object.keys(l).map((function(t){return c=l[t],(0,a.jsxs)("div",{children:[(0,a.jsxs)("a",{className:"list-group-item list-group-item-action list-group-item-secondary","data-target":"#"+c[t][0].academicYear,"data-toggle":"collapse","aria-controls":c[t][0].academicYear,children:["AY ",c[t][0].academicYear-1,"-",c[t][0].academicYear]}),(0,a.jsx)("div",{className:"list-group",id:c[t][0].academicYear,children:Object.keys(c).map((function(t){var r=c[t];return(0,a.jsxs)("div",{children:[(0,a.jsxs)("a",{className:"list-group-item list-group-item-action list-group-item-info","data-target":"#"+r[0].semester,"data-toggle":"collapse","aria-controls":r[0].semester,children:[r[0].semester," Semester"]}),(0,a.jsx)("div",{id:r[0].semester,className:"jumbotron",children:(0,a.jsx)(k,{records:r,clerkFlag:e.clerkFlag,facultyFlag:e.facultyFlag,token:e.token,facultyId:e.facultyId})})]})}))})]})}))}else t=(0,a.jsx)("p",{align:"center",children:"No data available!"});return(0,a.jsxs)("div",{className:"jsx-246082370",children:[(0,a.jsx)("h2",{align:"center",className:"jsx-246082370",children:" Faculty Load "}),(0,a.jsx)(n.Z,{unit:e.unit,position:e.position,children:e.name}),(0,a.jsx)("div",{role:"alert",id:"loadalert",style:{visibility:"hidden"},className:"jsx-246082370 alert alert-success"}),(0,a.jsx)("div",{className:"jsx-246082370 list-group",children:t}),(0,a.jsx)(s.default,{id:"246082370",children:[".list-group-item-info.jsx-246082370{text-indent:5%;}"]}),e.clerkFlag&&(0,a.jsx)(Y,{token:e.token,facultyId:e.facultyId,clerkFlag:e.clerkFlag,facultyFlag:e.facultyFlag})]})}}}]);